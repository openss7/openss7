<html>



<head>

<title>Loading LiS</title>
<meta name="title" content="Loading LiS">
<meta name="keywords" content="Linux, streams, loading, LiS">
<meta name="description" content="About loading LiS">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

<style type="text/css">

<!--

h2 {  font-family: Arial, Helvetica, sans-serif}

h1 {  font-family: Arial, Helvetica, sans-serif}

h3 {  font-family: Arial, Helvetica, sans-serif}

p {  font-family: Arial, Helvetica, sans-serif; font-size: 12pt}

a {  font-family: Arial, Helvetica, sans-serif; color: #0000FF}

a:link {  font-family: Arial, Helvetica, sans-serif; color: #0000FF}

a:hover {  font-family: Arial, Helvetica, sans-serif; color: #FF3333}

li {  font-family: Arial, Helvetica, sans-serif; font-size: 10pt}

ol {  font-family: Arial, Helvetica, sans-serif; font-size: 10pt}

-->

</style>

<script language="JavaScript">

<!--

function MM_swapImgRestore() { //v3.0

  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;

}



function MM_preloadImages() { //v3.0

  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();

    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)

    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}

}



function MM_findObj(n, d) { //v3.0

  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {

    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}

  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];

  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document); return x;

}



function MM_swapImage() { //v3.0

  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)

   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}

}

//-->

</script>

</head>







<body bgcolor="#FFFFFF" onLoad="MM_preloadImages('i/kernel_on.gif','i/download_on.gif','i/install_on.gif','i/removal_on.gif','i/loading_on.gif','i/drivers_on.gif','i/config_on.gif','i/demand_on.gif','i/compiled_on.gif','i/apps_on.gif','i/otherres_on.gif','i/command_on.gif','i/dki_on.gif','i/libs_on.gif','i/lisdrvrs_on.gif')">
<table width="700" border="0" cellspacing="0" cellpadding="0" height="120" bgcolor="#6666CC">

	 <tr> 

		  <td width="120" height="120" rowspan="3"><a href="index.html"><img src="i/penguin.gif" width="120" height="120" border="0"></a></td>

		  <td rowspan="3" width="570" height="120" align="center" valign="middle"> 

			   <h1><font color="#FFFFFF" style="font-size:30pt;">Linux STREAMS (LiS)</font></h1>

			 </td>

		  <td bgcolor="#ffffff" rowspan="3" width="10" height="120"><img src="./i/sideborder.gif" width="10" height="130"></td>

	 </tr>

	 <tr> </tr>

	 <tr> </tr>

</table>

<img src="./i/bottomborder.gif" width="703" height="15"> <br>

<table width="700" border="0" cellspacing="0" cellpadding="0">

  <tr> 

    <td rowspan="2" width="100" align="left" valign="top"> 
      <table width="90" border="0" cellspacing="0" cellpadding="0">
        <tr> 
          <td><a href="kernel.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('kernel','','i/kernel_on.gif',1)"><img name="kernel" border="0" src="i/kernel_off.gif" width="81" height="35"></a></td>
        </tr>
        <tr> 
          <td><a href="download.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('download','','i/download_on.gif',1)"><img name="download" border="0" src="i/download_off.gif" width="81" height="35"></a></td>
        </tr>
        <tr> 
          <td><a href="install.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('install','','i/install_on.gif',1)"><img name="install" border="0" src="i/install_off.gif" width="81" height="35"></a></td>
        </tr>
        <tr> 
          <td><a href="removal.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('removal','','i/removal_on.gif',1)"><img name="removal" border="0" src="i/removal_off.gif" width="81" height="35"></a></td>
        </tr>
        <tr> 
          <td><a href="loading.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('loading','','i/loading_on.gif',1)"><img name="loading" border="0" src="i/loading_off.gif" width="81" height="35"></a></td>
        </tr>
        <tr> 
          <td><a href="drivers.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('drivers','','i/drivers_on.gif',1)"><img name="drivers" border="0" src="i/drivers_off.gif" width="81" height="35"></a></td>
        </tr>
        <tr> 
          <td><a href="config.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('config','','i/config_on.gif',1)"><img name="config" border="0" src="i/config_off.gif" width="81" height="35"></a></td>
        </tr>
        <tr> 
          <td><a href="demand.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('demand','','i/demand_on.gif',1)"><img name="demand" border="0" src="i/demand_off.gif" width="81" height="35"></a></td>
        </tr>
        <tr> 
          <td><a href="compiled.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('compiled','','i/compiled_on.gif',1)"><img name="compiled" border="0" src="i/compiled_off.gif" width="81" height="35"></a></td>
        </tr>
        <tr> 
          <td><a href="apps.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('apps','','i/apps_on.gif',1)"><img name="apps" border="0" src="i/apps_off.gif" width="81" height="35"></a></td>
        </tr>
        <tr> 
          <td><a href="otherres.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('otherres','','i/otherres_on.gif',1)"><img name="otherres" border="0" src="i/otherres_off.gif" width="81" height="35"></a></td>
        </tr>
        <tr> 
          <td><a href="cmds.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('cmds','','i/command_on.gif',1)"><img name="cmds" border="0" src="i/command_off.gif" width="81" height="35"></a></td>
        </tr>
        <tr> 
          <td><a href="dki.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('dki','','i/dki_on.gif',1)"><img name="dki" border="0" src="i/dki_off.gif" width="81" height="35"></a></td>
        </tr>
        <tr> 
          <td><a href="libc.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('libs','','i/libs_on.gif',1)"><img name="libs" border="0" src="i/libs_off.gif" width="81" height="35"></a></td>
        </tr>
        <tr> 
          <td><a href="drvrs.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('lisdrvrs','','i/lisdrvrs_on.gif',1)"><img name="lisdrvrs" border="0" src="i/lisdrvrs_off.gif" width="81" height="35"></a></td>
        </tr>
      </table>
    </td>

    <td width="600" height="75"> 

      <div align="center"> 

        <h2>Loading LiS</h2>

      </div>

    </td>

  </tr>

  <tr> 

    <td width="600" height="100%" align="left" valign="top"> 

      <p>Once you have built LiS you need to load it into memory in order to execute 

        STREAMS drivers. What you do at this point depends upon whether you built 

        LiS as a loadable module or linked it into the kernel. </p>

      <h2><font size="3">LiS as Loadable Module</font><font

        size="4"> </font></h2>

      <p>The build process should have copied the file <font face="Courier New, Courier, mono">streams.o</font> 
        to the directory <font face="Courier New, Courier, mono">/lib/modules/</font><i>kernel-version</i><font face="Courier New, Courier, mono">/misc</font>. 
        Where <i>kernel-version</i> is something like 2.4.2. </p>

      <p>This means that to load LiS you simply type in &quot;modprobe streams&quot;. 
        However, the recommended method for starting LiS is to use the <font face="Courier New, Courier, mono">streams</font> 
        utility program. <font face="Courier New, Courier, mono">streams start</font> 
        loads LiS and <font face="Courier New, Courier, mono">streams stop</font> 
        unloads it.</p>

      <p>When LiS loads it will print a series of messages showing the names and 

        major device numbers of all STREAMS drivers and pushable modules loaded 

        with it. It will also print some version information about itself, including 

        the version of the kernel for which it has been compiled. </p>

      <h2><font size="3">LiS and kerneld</font> </h2>

      <p>If your kernel has been built using the kerneld construct then LiS will 
        automatically load as soon as any STREAMS file is opened. After installing 
        LiS, simply type in the command <font size="2" face="Courier New">streams 
        -s</font> just to test this mechanism. LiS should automatically load, 
        with messages on the console displaying version information and drivers 
        registered. Then the <font size="2" face="Courier New">streams</font><font

        size="2"> </font>command should run and print out a summary of STREAMS 
        activity. You can unload LiS via <font face="Courier New, Courier, mono">streams 
        stop</font>.</p>

      <h2><font size="3">LiS Compiled into Kernel</font><font

        size="4"> </font></h2>

      <p>If you have compiled LiS into the kernel then you need to make your new 

        kernel executable and reboot your system. </p>

      <p><i><b>You should always be careful when booting a new kernel. If you 
        have not done so already, you should set up your /etc/lilo.conf file so 
        that you have a trusted backup kernel that you can always boot in case 
        a newly-built kernel crashes at boot time.</b></i> </p>

      <p>From your kernel source tree, copy the file <font face="Courier New, Courier, mono">arch/i386/boot/bzImage</font> 
        (or <font face="Courier New, Courier, mono">zImage</font>) to the global 
        file that you want to boot from. This is usually either <font face="Courier New, Courier, mono">/vmlinuz</font> 
        or <font face="Courier New, Courier, mono">/boot/vmlinuz</font> depending 
        upon your distribution of Linux. </p>

      <p>Having done that, enter &quot;<font face="Courier New, Courier, mono">lilo</font>&quot; 
        to run the lilo utility on your newly copied kernel. You should see some 
        messages from lilo telling you that your new kernel is configured for 
        booting. </p>

      <p>Now just reboot your computer. </p>

      <p>As the kernel comes up, LiS's initialization routine will be run and 

        it will print out the same driver registration and version information 

        as for the loadable module case, above. </p>

      <h2><font size="3">Making /dev Entries</font> </h2>

      <p>A &quot;normal&quot; LiS build will have made a program named &quot;<font face="Courier New, Courier, mono">makenodes</font>&quot; 
        and copied it to <font face="Courier New, Courier, mono">/usr/sbin/strmakenodes</font>. 
        Before you can use any of your STREAMS drivers you must run that program. 
        Simply enter &quot;<font face="Courier New, Courier, mono">/usr/sbin/strmakenodes</font>&quot; 
        and the program will make all of the STREAMS related entries in the <font face="Courier New, Courier, mono">/dev</font> 
        directory. </p>

      <p>You do not need to do this every time you rebuild LiS. This only needs 
        to be done if you add &quot;node&quot; entries to the STREAMS <font face="Courier New, Courier, mono">Config</font> 
        file or if you do something that would cause the major device numbers 
        of STREAMS files to change. </p>

      <p>The &quot;<font face="Courier New, Courier, mono">make install</font>&quot; 
        target of LiS runs <font face="Courier New, Courier, mono">strmakenodes</font> 
        automatically and is the recommended method of making the <font face="Courier New, Courier, mono">/dev</font> 
        entries.</p>

      <p>&nbsp; </p>

      </td>

  </tr>

</table>

<p align="left">&nbsp;</p>



</body>



</html>



