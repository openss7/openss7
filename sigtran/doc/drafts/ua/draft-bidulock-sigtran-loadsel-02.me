.\" -*- nroff -*-
.\" =========================================================================
.\"
.\" @(#) $Id: draft-bidulock-sigtran-loadsel-02.me,v 0.9.2.2 2005/05/14 08:33:19 brian Exp $
.\"
.\" -------------------------------------------------------------------------
.\"
.\" Copyright (C) 2003  OpenSS7 Corporation <http://www.openss7.com>
.\"
.\" All Rights Reserved.
.\"
.\" Permission is granted to make and distribute verbatim copies of this
.\" manual provided the copyright notice and this permission notice are
.\" preserved on all copies.
.\"
.\" Permission is granted to copy and distribute modified versions of this
.\" manual under the conditions for verbatim copying, provided that the
.\" entire resulting derived work is distributed under the terms of a
.\" permission notice identical to this one
.\"
.\" Since the Linux kernel and libraries are constantly changing, this
.\" manual page may be incorrect or out-of-date.  The author(s) assume no
.\" responsibility for errors or omissions, or for damages resulting from
.\" the use of the information contained herein.  The author(s) may not have
.\" taken the same level of care in the production of this manual, which is
.\" licensed free of charge, as they might when working professionally.
.\"
.\" Formatted or processed versions of this manual, if unaccompanied by the
.\" source, must acknowledge the copyright and authors of this work.
.\"
.\" -------------------------------------------------------------------------
.\"
.\" U.S. GOVERNMENT RESTRICTED RIGHTS.  If you are licensing this Software on
.\" behalf of the U.S. Government ("Government"), the following provisions
.\" apply to you.  If the Software is supplied by the Department of Defense
.\" ("DoD"), it is classified as "Commercial Computer Software" under
.\" paragraph 252.227-7014 of the DoD Supplement to the Federal Acquisition
.\" Regulations ("DFARS") (or any successor regulations) and the Government
.\" is acquiring only the license rights granted herein (the license rights
.\" customarily provided to non-Government users).  If the Software is
.\" supplied to any unit or agency of the Government other than DoD, it is
.\" classified as "Restricted Computer Software" and the Government's rights
.\" in the Software are defined in paragraph 52.227-19 of the Federal
.\" Acquisition Regulations ("FAR") (or any successor regulations) or, in the
.\" cases of NASA, in paragraph 18.52.227-86 of the NASA Supplement to the
.\" FAR (or any successor regulations).
.\"
.\" -------------------------------------------------------------------------
.\"
.\" $Name:  $($Revision: 0.9.2.2 $) modified $Date: 2005/05/14 08:33:19 $ by $Author: brian $
.\"
.\" =========================================================================
.ds version Version\ 0.2
.ds date July\ 26,\ 2003
.ds expiry January\ 2004
.nr levels 0
.so ../draft.me
.bp
.sz \n(tp
.he 'Internet Draft'UA LOADSEL'\\\\*[date]'
.TS
expand tab(;);
l c r.
Network Working Group;;Brian Bidulock
INTERNET-DRAFT;;OpenSS7 Corporation
.bl 1
;;\*[date]
Expires in \*[expiry];;
.bl 1
.TE
.(l C
.sz \n(tp
\fB\
Load Selection (LOADSEL)
for
Signalling User Adaptation Layers

<draft-bidulock-sigtran-loadsel-02.\*(|x>
.)l
.rr |x
.ne 4
.uh "Status of this Memo"
.pp
This document is an Internet-Draft and is in full conformance with all
provisions of Section 10 or RFC 2026.  Internet-Drafts are working documents
of the Internet Engineering Task Force (IETF), its areas, and its working
groups.  Note that other groups may also distribute working documents as
Internet-Drafts.
.pp
Internet-Drafts are draft documents valid for a maximum of six months and may
be updated, replaced, or obsoleted by other documents at any time.  It is
inappropriate to use Internet-Drafts as reference material or to cite them
other than as 'work in progress'.
.pp
The list of current Internet-Drafts can be accessed at
http://www.ietf.org/ietf/1id-abstracts.txt
.pp
The list of Internet-Draft Shadow Directories can be accessed at
http://www.ietf.org/shadow.html
.pp
To learn the current status of any Internet-Draft, please check the
'1id-abstracts.txt' listing contained in the Internet-Drafts Shadow
Directories on ftp.is.co.za (Africa), nic.nordu.net (Europe), munnari.oz.au
(Pacific Rim), ftp.ietf.org (US East Coast), or ftp.isi.edu (US West Coast).
.uh "Copyright"
.pp
Copyright \(co The Internet Society (2003).  All Rights Reserved.
.uh "Abstract"
.pp
This Internet-Draft describes \fI\)Load Selection\fR (\fI\)LOADSEL\fR) for
Signalling User Adaptation Protocols,
.[
iua-rfc
%Z 1
.]
.[
iua-bis
%Z 2
.]
.[
dua-05
%Z 2
.]
.[
v5ua-03
%Z 2
.]
.[
ietf-sigtran-gr303ua-00
%Z 2
.]
.[
m2ua-rfc
%Z 1
.]
.[
m3ua-rfc
%Z 1
.]
.[
sua-15
%Z 1
.]
.[
isua-01
%Z 2
.]
.[
tua-02
%Z 2
.]
which permits an Application Server Processes (ASP) to indicate its placement
within an Application Server and permits an Signalling Gateway (SG) to
distribute traffic over ASPs in Application Servers under Application Server
Process (ASP) control.
.uh "Contents"
.pp
A complete table of contents, list of illustrations and tables, and a change
history, are included at the end of this document.
.sh 1 "Introduction"
.sh 2 "Scope"
.pp
This Internet-Draft provides parameters and associated procedures in extension
to the parameters and procedures of the Signalling User Adaptation Layers
(UAs),
.[
iua-rfc
.]
.[
iua-bis
.]
.[
dua-05
.]
.[
v5ua-03
.]
.[
ietf-sigtran-gr303ua-00
.]
.[
m2ua-rfc
.]
.[
m3ua-rfc
.]
.[
sua-15
.]
.[
isua-01
.]
.[
tua-02
.]
for the purpose of permitting Application Server Process control over
placement of ASPs within Application Servers (or Load Groups)
.[
loadgrp-02
%Z 2
.]
as part of the normal procedures
of these UA protocols.
.pp
UA implementations supporting \fI\)LOADSEL\fR are intended to be
compatible with UA implementations not supporting \fI\)LOADSEL\fR.
.sh 2 "Abbreviations"
.lp
.ix +\n(iiu
.TS
tab(:);
li1c0lssss.
AS:\(em:Application Server.
ASP:\(em:Application Server Process.
IANA:\(em:Internet Assigned Numbers Authority
I-D:\(em:Internet-Draft
IETF:\(em:Internet Engineering Task Force
IP:\(em:Internet Protocol.
IPSP:\(em:IP Signalling Point.
SCCP:\(em:Signalling Connection Control Part.
SCTP:\(em:Stream Control Transmission Protocol.
SG:\(em:Signalling Gateway.
SGP:\(em:Signalling Gateway Process.
SIGTRAN:\(em:IETF Signalling Transport WG
SPP:\(em:Signalling Peer Process.
SS7:\(em:Signalling System No. 7.
SUA:\(em:SS7 SCCP-User Adpatation Layer.
TCAP:\(em:Transaction Capabilities Application Part.
TUA:\(em:SS7 TCAP-User Adaptation Layer.
UA:\(em:User Adaptation Layer.
WG:\(em:Working Group
.TE
.sh 2 "Terminology"
.pp
\fI\)LOADSEL\fR supplements the terminology used in the UA documents
.[
iua-rfc
.]
.[
iua-bis
.]
.[
dua-05
.]
.[
v5ua-03
.]
.[
ietf-sigtran-gr303ua-00
.]
.[
m2ua-rfc
.]
.[
m3ua-rfc
.]
.[
sua-15
.]
.[
isua-01
.]
.[
tua-02
.]
by adding the following terms:
.lp
\fI\)Load Selection\fR \-
.ix +\n(iiu
a partition of traffic within an Application Server described by the \fI\)Load
Selection\fR parameter and identified by a \fI\)Load Selector\fR parameter.
.lp
\fI\)Load Selector (LS)\fR \-
.ix +\n(iiu
an identifier that uniquely identifies a partition of traffic flow within an
Application Server.  This identifier is only guaranteed unique within the
scope of an Application Server and must be combined with a \fI\)Routing
Context\fR (or \fI\)Interface Identifier(s)\fR) (explicitly or implicitly) to
uniquely define a partition of traffic flow at a Signalling Gateway.
.lp
\fI\)Signalling User Adaptation Layer (UA)\fR \-
.ix +\n(iiu
one or more of the Stream Control Transmission Protocol (SCTP)
.[
rfc 2960
%Z 1
.]
ISDN Signalling User Adaptation Layers
.[
iua-rfc
.]
.[
iua-bis
.]
.[
dua-05
.]
.[
v5ua-03
.]
.[
ietf-sigtran-gr303ua-00
.]
or SS7 Signalling User Adaptation Layers
.[
m2ua-rfc
.]
.[
m3ua-rfc
.]
.[
sua-15
.]
.[
isua-01
.]
.[
tua-02
.]
supporting the concept of an Application Server.
.sh 2 "Overview"
.pp
UA procedures with regard to traffic distribution and ASP traffic management
provide a mechanism to select the algorithm for coordinating state and
distributing traffic over a number of Application Server Processes (ASPs)
serving an Application Server (AS).  These existing procedures provide only
simplified distribution approaches which are not amenable in the following
situations:
.np
Connection- or Transaction-Oriented traffic flows which group the messages
corresponding to a connection or a transaction.
.np
Large scale systems that need to adapt to dynamic traffic loading.
.np
Systems that need dynamic reconfiguration under ASP control for maintenance or
fail-over purposes.
.np
Systems that require ASP control over load-sharing.
.pp
\fI\)LOADSEL\fR for the Signalling User Adaptation Layers
.[
iua-rfc
.]
.[
iua-bis
.]
.[
dua-05
.]
.[
v5ua-03
.]
.[
ietf-sigtran-gr303ua-00
.]
.[
m2ua-rfc
.]
.[
m3ua-rfc
.]
.[
sua-15
.]
.[
isua-01
.]
.[
tua-02
.]
permits close control over the placement and grouping of Application Server
Processes serving an Application Server that provides for load selection
placement within the Application Server: a capability not present in the
existing scheme.
.pp
Under existing UA traffic distribution, there is no mechanism which permits an
Application Server Process (ASP) to indicate which of a number of ASPs it
wishes to override in an Override AS.  There is also no mechanism which
permits an ASP to indicate which traffic flows it wishes to process within a
Load-share or Broadcast AS.
.pp
\fI\)LOADSEL\fR provides the ability for the ASP itself to control its
placement within an AS, be informed of the failure of ASPs serving other load
selections within the AS, and chose to activate itself to receive additional
load selections within the AS.  \fI\)LOADSEL\fR also permits grouping of ASPs
within a load selection.
.sh 3 "Non-Load Selection Traffic Distribution"
.(z
.ie '\*(.T'ps' \{\
.so loadsel-02.fig1.pic
.\}
.el \{\
.(c
.nf
.sz -2
\fC\
                                    ____
           Traffic                 /....\\
           Mode Type          ____|__....|
                             |       |...|
 _______ /------------------>|  ASP  |...|
|       |---\\                |_______|...|
|  SGP  |--\\ \\                ____|__....|
|_______|-\\ \\ \\              |       |...|
         \\ \\ \\ \\------------>|  ASP  |...|
 _______  \\ \\ \\              |_______|...|
|       |  \\ \\ \\              ____|__....| Application
|  SGP  |   \\ \\ \\            |       |...| Server
|_______|    \\ \\ \\---------->|  ASP  |...|
              \\ \\            |_______|...|
               \\ \\            ____|__....|
                \\ \\          |       |...|
                 \\ \\-------->|  ASP  |...|
                  \\          |_______|...|
                   \\          ____|__....|
                    \\        |       |...|
                     \\------>|  ASP  |...|
                             |_______|...|
                                  |......|
                                   \\____/
.fi
.sz +2
.)c
.\}
.#f "Non-Load Selection Traffic Distribution"
.)z
.pp
\fI\*(&f\n(&p\fR illustrates the existing traffic distribution algorithm that
is used across the Signalling User Adaptation Layers.
.pp
When an SGP distributes a Signalling User Adaptation Layer message toward the
Application Server based on the \fI\)Routing (Link) Key\fR, it selects an ASP
that is active for the AS according to the \fI\)Traffic Mode Type\fR that is
associated with the AS.  The \fI\)Traffic Mode Type\fR describes three general
distribution algorithms: Override, Load-share and Broadcast.
.pp
The detailed actions taken for these distribution algorithms are described in
Section 4 of the Signalling User Adaptation Layer specifications;
.[
iua-rfc
.]
.[
iua-bis
.]
.[
dua-05
.]
.[
v5ua-03
.]
.[
ietf-sigtran-gr303ua-00
.]
.[
m2ua-rfc
.]
.[
m3ua-rfc
.]
.[
sua-15
.]
.[
isua-01
.]
.[
tua-02
.]
however, they can be summarized as follows:
.lp
.b "Override:\-\ "
.ix +\n(iiu
When distributing messages to an Override Application Server, the SGP selects
the ASP which is active for the Application Server.  In an Override
Application Server, at most one ASP can be active for the AS at any given point
in time.  The active ASP for the AS is selected.
.lp
.ix +\n(iiu
A major limitation of the Override AS that is removed by \fI\)LOADSEL\fR is
that only one ASP can be active within an Application Server.  This does not
work when the number of ASPs required to service an AS is greater than one.
.lp
.b "Load-share:\-\ "
.ix +\n(iiu
When distributing messages to a Load-share Application Server, the SGP selects
one of the ASPs that are active for the Application Server using an
implementation dependent load-sharing algorithm based on some unspecified
aspect of the traffic or static configuration data.
.lp
.ix +\n(iiu
A major limitation of the Load-share AS is that each ASP in the
Application Server must be capable of handling any (and all) traffic within
the Load-share AS.  Under the current approach an SGP does not distinguish
between ASPs in a Load-share AS and, aside from perhaps attempting to equally
distribute traffic load over the available ASPs, it is not possible for the
ASPs to control which traffic flows it receives.  This causes management
difficulties when the number of ASPs required to service an AS is large, but
the number of spare ASPs is small.  It also causes considerable difficulty
when each ASP does not have access to the entire AS call or transaction
state.
.lp
.b "Broadcast:\-\ "
.ix +\n(iiu
When distributing messages to a Broadcast Application Server, the SGP sends a
copy of the message to each of the ASPs that are active for the Application
Server.  The ASPs themselves decide which, if any, of the ASPs will process
the message.
.lp
.ix +\n(iiu
A major limitation of the Broadcast AS is that each ASP receives each
message.  This does not scale well when the number of ASPs needed to service
an AS is large.
.pp
\fI\)LOADSEL\fR enhances the traffic distribution algorithms of the existing
Signalling User Adaptation Layers by providing ASP control over its placement
within an AS by load selection.
.sh 3 "Load Selection Traffic Distribution"
.(z
.ie '\*(.T'ps' \{\
.so loadsel-02.fig2.pic
.\}
.el \{\
.(c
.nf
.sz -2
\fC\
        Traffic        Load         ____
        Mode Type      Selection   /....\\
                              ____|__....|
                       LS1   |       |...|
 _______ /------------------>|  ASP  |...|
|       |---\\                |_______|...|
|  SGP  |--\\ \\                ____|__....|
|_______|-\\ \\ \\        LS2   |       |...|
           \\ \\ \\------------>|  ASP  |...|
 _______    \\ \\              |_______|...|
|       |    \\ \\              ____|__....| Application
|  SGP  |     \\ \\      LS3   |       |...| Server
|_______|      \\ \\---------->|  ASP  |...|
                \\            |_______|...|
                 \\            ____|__....|
                  \\          |       |...|
                   \\-------->|  ASP  |...|
                   |         |_______|...|
                   |   LS4    ____|__....|
                   |         |       |...|
                   \\-------->|  ASP  |...|
                             |_______|...|
                                  |......|
                                   \\____/
.fi
.sz +2
.)c
.\}
.#f "Load Selection Traffic Distribution"
.)z
.pp
\fI\*(&f\n(&p\fR illustrates the \fI\)LOADSEL\fR traffic distribution
algorithms that are used across the Signalling User Adaptation Layers as a
result of the \fI\)LOADSEL\fR messages and procedures.
.pp
\fI\)LOADSEL\fR introduces the concept of a \fI\)Load Selector\fR.  A
\fI\)Load Selector\fR is an identifier that is used to identify a traffic flow
within (or across) Application Server(s).  Signalling Gateway Processes (SGPs)
distribute traffic first over the \fI\)Load Selector\fR and then distribute
traffic within the \fI\)Load Selector\fR.  Each \fI\)Load Selector\fR
describes (and is identified by) an identifier within the Application Server.
The \fI\)Load Selector\fR identifies the traffic flows that will be
distributed to ASPs associated with the \fI\)Load Selector\fR within an
Application Server.
.pp
When an SGP distributes a Signalling User Adaptation Layer message toward an
Application Server based on the \fI\)Routing (Link) Key\fR, it first derives a
\fI\)Load Selector\fR according to a UA-specific, AS-specific and
implementation-dependent load selection algorithm.  This load selection
algorithm is configured at the SGP and may consist, for example, of the
Signalling Link Selection (SLS),
.[
q704
%Z 2
.]
Circuit Identification Code (CIC),
.[
q723
%Z 2
.]
.[
q763
%Z 2
.]
Subsystem Number (SSN),
.[
q713
%Z 2
.]
Destination Local Reference (DLR),
.[
q713
.]
or Transaction Id (TID),
.[
q773
%Z 2
.]
value contained in the message for distribution.
.pp
Once the SGP has determined the \fI\)Load Selector\fR to which the message
corresponds, an ASP that is active for the associatd Load Selection within the
AS is selected.  When multiple ASPs are active for the same Load Selection
within an AS, the SGP uses the traffic handling mode based on the \fI\)Traffic
Mode Type\fR associated with the Application Server (or Load Group\*#) to
choose the ASP within the load selection.
.(d
.ip \*#
Another draft: \fI\)UA Load Grouping\fR,
.[
loadgrp-02
.]
provides for selection of \fI\)Load Distribution\fR methods within a \fI\)Load
Selector\fR.  The draft
.[
loadgrp-02
.]
refers to a group of ASPs
within the same traffic load selection as a \fI\)Load Group\fR and associates
a \fI\)Load Distribution\fR with the load group that can be: Override,
Load-share or Broadcast.  \fI\)LOADSEL\fR is applicable both to the normal
\fI\)Traffic Mode Type\fR of an AS, as well as to the \fI\)Load
Distribution\fR within a \fI\)Load Group\fR.
.)d
.pp
Under \fI\)LOADSEL\fR, the \fI\)Traffic Mode Type\fR continues to describe
three general distribution algorithms: Override, Load-share and Broadcast.  The
change in the behavior of the SGP when selecting an ASP for traffic
distribution introduced by \fI\)LOADSEL\fR is that the SGP also takes into
account the concept of a \fI\)Load Selector\fR.  The \fI\)LOADSEL\fR
procedures are summarized as follows:
.lp
.b "Override:\-\ "
.ix +\n(iiu
When distributing messages to an Override Application Server, the SGP first
determines the \fI\)Load Selector\fR associated with the message.  The SGP
then distributes the message to the ASP that is active for the traffic flow
indicated by the \fI\)Load Selector\fR within the AS.  In an Override
Application Server, at most one ASP can be active for the AS within a
\fI\)Load Selector\fR at any given point in time.  The active ASP associated
with the \fI\)Load Selector\fR for the AS is used.
.lp
.b "Load-share:\-\ "
.ix +\n(iiu
When distributing messages to a Load-share Application Server, the SGP
first determines the \fI\)Load Selector\fR associated with the message.  The
SGP then selects one of the active ASPs associated with the \fI\)Load
Selector\fR within the AS using an implementation dependent load-sharing
algorithm based on some unspecified aspect of the traffic or static
configuration data.
.lp
.b "Broadcast:\-\ "
.ix +\n(iiu
When distributing messages to a Broadcast Application Server, the SGP
first determines the \fI\)Load Selector\fR associated with the message.  The
SGP then selects all of the active ASPs associated with the \fI\)Load
Selector\fR within the AS and sends a copy of the message to each ASP.  (The
ASPs themselves decide which ASP(s) will process the message.)
.pp
The result of this extension is that Application Server Processes have control
over their placement within an Application Server and can control the traffic
that they receive by registering and activating for specific \fI\)Load
Selectors\fR within the AS.
.#e
.sh 1 "Conventions"
.pp
The keywords \fB\)MUST\fR, \fB\)MUST NOT\fR, \fB\)REQUIRED\fR, \fB\)SHALL\fR,
\fB\)SHALL NOT, \fB\)SHOULD\fR, \fB\)SHOULD NOT\fR, \fB\)RECOMMENDED\fR,
\fB\)NOT RECOMMENDED\fR, \fB\)MAY\fR, and \fB\)OPTIONAL\fR, when they appear
in this document, are to be interpreted as described in.
.[
key words
%Z 1
.]
.#e
.sh 1 "Protocol Elements"
.pp
The following subsections describe the parameters which are added by this
extension, their format and the messages in which they are used.
.sh 2 "Parameters"
.pp
\fI\)LOADSEL\fR adds one new parameter: the \fI\)Load Selector\fR parameter.
.sh 3 "Load Selector"
.pp
The \fI\)Load Selector\fR parameter is used in the \fI\)REG RSP\fR,
\fI\)ASPAC\fR, \fI\)ASPAC ACK\fR, \fI\)ASPIA\fR, \fI\)ASPIA ACK\fR, and
\fI\)NTFY\fR messages.  It is used to identify the placement of the ASP within
an Application Server.  It identifies the Load Selection (partition of traffic
flow) for which the ASP is registering, activating or deactivating, or when
the SG is indicating or notifying of an ASP state change.
.lp
The \fI\)Load Selector\fR parameter is formatted as follows: \*#
.(b L
.(c
.nf
.sz -2
\fC\
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|           Tag = 0x0018        |              Length           |
+-------------------------------+-------------------------------+
\\                                                               \\
/                        Load Selector  1                       /
\\                                                               \\
+---------------------------------------------------------------+
\\                                                               \\
/                              ...                              /
\\                                                               \\
+---------------------------------+-----------------------------+
\\                                                               \\
/                        Load Selector  n                       /
\\                                                               \\
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
.fi
.sz +2
.)c
.)b
.lp
.(d
.#v
.ip \*#
\fB\)EDITOR'S NOTE:- \fR The parameter tag values shown as \f(CR\)0x0018\fR)
will be assigned by IANA within the common parameter range of the
SIGTRAN UAs and may change its value in further versions of this document.
.)d
.lp
The \fI\)Load Selector\fR parameter contains the following fields:
.ip "\fB\)Load Selector field: n x 32-bits (unsigned integer)\fR" 2
.ba +2
.\".lp
.\"When the \fI\)Load Selector\fR is included in the \fI\)REG REQ\fR messages, it
.\"\fB\)SHOULD\fR be stored in association with the Application Server indicated
.\"by the \fI\)Routing Context\fR to be provided in the \fI\)REG RSP\fR message.
.lp
The \fI\)Load Selector\fR forms and extension to the \fI\)Routing (Link)
Key\fR and an attribute of the Application Server as indicated by the
\fI\)Routing Context\fR (\fI\)Interface Identifier(s)\fR).
.lp
The \fI\)Load Selector\fR field is an identifier, that \fB\)MUST\fR be unique
within an Application Server and \fB\)MAY\fR be unique within an
administrative domain, that identifies the placement or Load Selection
of an ASP within an AS.  This identifier, in conjunction with any Application
Server identifier (i.e, \fI\)Routing Context\fR or \fI\)Interface
Identifier(s)\fR), identifies the traffic flow for which an ASP is
registering, activating or deactivating, or for which an SG is providing
notification of an ASP or AS state change.
.ba -2
.pp
When the \fI\)Load Selector\fR parameter is included in the \fI\)ASPAC\fR,
\fI\)ASPAC ACK\fR, \fI\)ASPIA\fR, \fI\)ASPIA ACK\fR or \fI\)NTFY\fR message,
one \fI\)Routing Context\fR (\fI\)Interface Identifier(s)\fR) representing a
single Application Server \fB\)SHOULD\fR be associated (specified or implied)
with the message.
.sh 3 "Load Selection"
.pp
The \fI\)Load Selection\fR parameter is used in the \fI\)REG REQ\fR message.
It is used to register the placement of an ASP within an Application Server.
.lp
The \fI\)Load Selection\fR parameter is formatted as follows: \*#
.(b
.(c
.nf
.sz -2
\fC\
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|          Tag = 0x0019         |             Length            |
+- - - - - - - - - - - - - - - -+- - - - - - - - - - - - - - - -+
\\                                                               \\
/                       Load Key Parameter(s)                   /
\\                                                               \\
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
.sz +2
.fi
.)c
.)b
.lp
.(d
.#v
.ip \*#
\fB\)EDITOR'S NOTE:- \fR The parameter tag values shown as \f(CR\)0x0019\fR)
will be assigned by IANA within the common parameter range of the
SIGTRAN UAs and may change its value in further versions of this document.
.)d
.lp
The \fI\)Load Key Parameter(s)\fR can contain the following parameters:
.ix +4
.TS
tab(:);
lblbss
llw(2.5i)lc.
UA:Parameters
_
M2UA:SLS Range:Mandatory:*1
_
M3UA:Service Indicators:Conditional:*2
:CIC Range:Conditional
_
SUA:Address Range:Conditional:*3
:DLR Label:Conditional
:TID Label:Conditional
_
ISUA:CIC Range:Mandatory
_
TUA:Address Range:Condtional:*3
:Transaction Id Range:Conditional:*4
_
.TE
.ip "Note 1:" 8
The \fI\)SLS Range\fR parameter has not yet been defined for M2UA.
.[
m2ua-rfc
.]
.ip "Note 2:" 8
When the \fI\)Service Indicators\fR parameter is used in the \fI\)Load
Selection\fR, it \fB\)SHOULD\fR be more restricted than (a subset of) any
\fI\)Service Indicators\fR parameter present in the \fI\)Routing Key\fR
parameter for routing purposes.
.ip "Note 3:" 8
When the \fI\)Address Range\fR parameter is used in the \fI\)Load
Selection\fR, it \fB\)SHOULD\fR be more restrictive than (a subset of) any
\fI\)Address Range\fR parameter present in the \fI\)Routing Key\fR parameter
for routing purposes.
.ip "Note 4:" 8
When the \fI\)Transaction Id Range\fR parameter is used in the \fI\)Load
Selection\fR, it \fB\)SHOULD\fR be more restrictive than (a subset of) any
\fI\)Transaction Id Range\fR parameter present in the \fI\)Routing Key\fR
parameter for routing purposes.
.pp
The \fI\)Load Selection\fR parameter \fB\)SHOULD\fR contain at least one
Load Selection Parameter.
.sh 2 "Messages"
.ds #u \*#
.pp
\fI\)LOADSEL\fR adds the \fI\)Load Selector\fR parameter as an \fB\)OPTIONAL\fR
parameter to be used in conjunction with the common \fI\)Traffic Mode Type\fR
in the following messages: \*#
.(d
.ip \*#
For a detailed description of these messages, see Section 3 of
the SIGTRAN UA specifications cited under "References".
.[
iua-rfc
.]
.[
iua-bis
.]
.[
dua-05
.]
.[
v5ua-03
.]
.[
ietf-sigtran-gr303ua-00
.]
.[
m2ua-rfc
.]
.[
m3ua-rfc
.]
.[
sua-15
.]
.[
isua-01
.]
.[
tua-02
.]
.)d
.ix +4
.TS
tab(:);
lil.
REG REQ:Registration Request message
REG RSP:Registration Response message
ASPAC:ASP Active message
ASPAC ACK:ASP Active Ack message
ASPIA:ASP Inactive message
ASPIA ACK:ASP Inactive Ack message
NTFY:Notify message
.TE
.sh 3 "Registration Request (REG REQ)"
.pp
\fI\)LOADSEL\fR supplements the \fI\)Registration Request (REG REQ)\fR message
by permitting the following optional parameters to be included in the
\fI\)Routing Key\fR
.[
m3ua-rfc
.]
.[
sua-15
.]
.[
isua-01
.]
.[
tua-02
.]
or \fI\)Link Key\fR
.[
m2ua-rfc
.]
parameter within the message:
.ix +4
.TS
tab(:);
lbss
lw(2.5i)lc.
Extension Parameters
_
Load Selection:Optional:
.TE
.ix -4
.pp
The \fI\)Load Selector\fR parameter is used in the \fI\)Routing Key\fR
(\fI\)Link Key\fR) to further refine the traffic load selection to be received
by the registering ASP.
.lp
The format of the resulting \fI\)Routing Key\fR or \fI\)Link Key\fR parameter
is as follows: \*#
.(b L
.(c
.sz -2
.nf
\fC\
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|          Tag =                |           Length = 8          |
+- - - - - - - - - - - - - - - -+- - - - - - - - - - - - - - - -+
|                    Local-RK(LK)-Identifier                    |
+-------------------------------+-------------------------------+
|          Tag = 0x0000         |           Length = 8          |
+- - - - - - - - - - - - - - - -+- - - - - - - - - - - - - - - -+
|                       Traffic Mode Type                       |
+-------------------------------+-------------------------------+
|          Tag = 0x0019         |             Length            |
+- - - - - - - - - - - - - - - -+- - - - - - - - - - - - - - - -+
\\                                                               \\
/                        Load Selection                         /
\\                                                               \\
+---------------------------------------------------------------+
\\                                                               \\
/                         Key Parameter(s)                      /
\\                                                               \\
/                                                               /
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
.fi
.sz +2
.)c
.)b
.lp
.(d
.#v
.ip \*#
\fB\)EDITOR'S NOTE:- \fR The parameter tag values shown as \f(CR\)0x0019\fR)
will be assigned by IANA within the common parameter range of the
SIGTRAN UAs and may change its value in further versions of this document.
.)d
.pp
When an ASP wishes to register within a Load Selection associated with
an Application Server, it includes the \fI\)Load Selection\fR parameter in the
\fI\)Routing Key\fR (\fI\)Link Key\fR) for that Application Server in the
\fI\)REG REQ\fR message.
.pp
The \fI\)Load Selection\fR parameter indicates the traffic load selection
to be used within the \fI\)Application Server\fR as identifier by the
\fI\)Routing (Link) Key\fR parameter.
.pp
When the ASP includes the \fI\)Load Selection\fR parameter in the \fI\)Routing
(Link) Key\fR it expects the SGP to respond with a \fI\)Load Selector\fR
parameter in addition to the \fI\)Routing Context\fR to indicate the
identifier for the \fI\)Load Selection\fR specified.  In this way, the
\fI\)Load Selection\fR parameter is analogous to the \fI\)Routing Key\fR and
the \fI\)Load Selector\fR parameter is analogous to the \fI\)Routing
Context\fR.
.pp
No other changes to the \fI\)REG REQ\fR message, \fI\)Routing Key\fR or
\fI\)Link Key\fR parameters formats are provided by this extension.
.sh 3 "Registration Response (REG RSP)"
.pp
\fI\)LOADSEL\fR supplements the \fI\)Registration Response (REG RSP)\fR
message by permitting the following optional parameters to be include in the
\fI\)Registration Result\fR parameter within the message:
.ix +4
.TS
tab(:);
lbss
lw(2.5i)lc.
Extension Parameters
_
Load Selector:Optional:
.TE
.pp
The \fI\)Load Selector\fR parameter is used in the \fI\)Regsitration Result\fR
to provide an identifier for the registered \fI\)Load Selection\fR.
.lp
The format of the resulting \fI\)Registration Response\fR parameter is as
follows:
.(b
.(c
.nf
.sz -2
\fC\
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|          Tag =                |             Length            |
+- - - - - - - - - - - - - - - -+- - - - - - - - - - - - - - - -+
|                    Local-RK(LK)-Identifier                    |
+---------------------------------------------------------------+
|                      Regsitration Status                      |
+---------------------------------------------------------------+
|             Routing Context (Interface Identifier)            |
+---------------------------------------------------------------+
|                         Load Selector                         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
.sz +2
.fi
.)c
.)b
.pp
When the SGP replies to a \fI\)REG REQ\fR that contained a \fI\)Load
Selection\fR parameter, and the registration is successful, it returns the
\fI\)Load Selector\fR in the \fI\)REG RSP\fR associated with the \fI\)Load
Selection\fR in the \fI\)REG REQ\fR.
.pp
When the registration is unsuccessful (i.e. the \fI\)Registration Status\fR
indicates an error), the \fI\)Load Selector\fR \fB\)SHOULD NOT\fR be included
in the \fI\)REG RSP\fR message.
.pp
\fI\)LOADSEL\fR extends the common \fI\)Registration Status\fR parameter in
the \fI\)REG RSP\fR message by adding the following values to the
\fI\)Registration Status\fR:
.ix +4
.nr bs 0
.(b
.nr bs 1v
.TS H
tab(:);
lblb
nl.
Value\*#:Description
_
.TH
12:Error \- Unsupported Load Selection
13:Error \- Invalid Load Selection
14:Error \- Cannot Support Unique Loadsharing
15:Error \- Unsupported LS Parameter Field
.TE
.nr bs 0
.)b
.nr bs 1v
.lp
.(d
.#v
.ip \*#
\fB\)EDITOR'S NOTE:- \fR The \fI\)Registration Status\fR values shown as
\f(CR\)12\fR, \f(CR\)13\fR, \f(CR\)14\fR and \f(CR\)15\fR will be
assigned by IANA as a value of the UA-specific \fI\)Registration Status\fR
parameter for each SIGTRAN UA and may change its value in further versions of
this document.
.)d
.pp
No other changes to the \fI\)REG RSP\fR message or \fI\)Regsitration
Response\fR parameter formats are provided by this extension.
.sh 3 "ASP Active (ASPAC)"
.pp
\fI\)LOADSEL\fR supplements the \fI\)ASP Active (ASPAC)\fR message by
permitting the following optional parameters to be included in the
\fI\)ASPAC\fR message:
.ix +4
.TS
tab(:);
lbss
lw(2.5i)lc.
Extension Parameters
_
Load Selector:Optional:
.TE
.ix -4
.lp
The format of the resulting \fI\)ASPAC\fR message is as follows: \*(#u\*#
.(b L
.(c
.nf
.sz -2
\fC\
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|          Tag = 0x000b         |           Length = 8          |
+- - - - - - - - - - - - - - - -+- - - - - - - - - - - - - - - -+
|                        Traffic Mode Type                      |
+---------------------------------------------------------------+
\\                                                               \\
/                         Routing Context                       /
\\                               or                              \\
/                     Interface Identifier(s)                   /
\\                                                               \\
\f(CB\
+-------------------------------+-------------------------------+
|          Tag = 0x0018         |             Length            |
+- - - - - - - - - - - - - - - -+- - - - - - - - - - - - - - - -+
\\                                                               \\
/                          Load Selector                        /
\\                                                               \\
+-------------------------------+-------------------------------+
\f(CR\
|          Tag = 0x0004         |             Length            |
+- - - - - - - - - - - - - - - -+- - - - - - - - - - - - - - - -+
\\                                                               \\
/                            Info String                        /
\\                                                               \\
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
.fi
.sz +2
.)c
.)b
.lp
.(d
.#v
.ip \*#
\fB\)EDITOR'S NOTE:- \fR The parameter tag values shown as \f(CR\)0x0018\fR)
will be assigned by IANA within the common parameter range of the
SIGTRAN UAs and may change its value in further versions of this document.
.)d
.pp
The \fI\)Load Selector\fR parameter is used by the ASP in the \fI\)ASPAC\fR
message to indicate the range of traffic for which the ASP is activating.  The
Application Servers for which the \fI\)Load Selectors\fR apply is either
indicated in the \fI\)ASPAC\fR message by providing the associated
\fI\)Routing Context\fR (\fI\)Interface Identifier(s)\fR) or, if there is no
\fI\)Routing Context\fR (\fI\)Interface Identifier\fR) parameter in the
\fI\)ASPAC\fR message, the associated Application Servers are implied by SGP and ASP
configuration data.  (See Section 4.1.5 \- "ASP Active Procedures".)
.pp
No other changes to the \fI\)ASPAC\fR message format are provided by this
extension.
.sh 3 "ASP Active Ack (ASPAC ACK)"
.pp
\fI\)LOADSEL\fR supplements the \fI\)ASP Active Ack (ASPAC ACK)\fR message by permitting the following
optional parameters to be included in the \fI\)ASPAC ACK\fR message:
.ix +4
.TS
tab(:);
lbss
lw(2.5i)lc.
Extension Parameters
_
Load Selector:Optional:
.TE
.ix -4
.lp
The format of the resulting \fI\)ASPAC ACK\fR message is as follows: \*(#u\*#
.(b L
.(c
.nf
.sz -2
\fC\
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|          Tag = 0x000b         |           Length = 8          |
+- - - - - - - - - - - - - - - -+- - - - - - - - - - - - - - - -+
|                         Traffic Mode Type                     |
+---------------------------------------------------------------+
\\                                                               \\
/                         Routing Context                       /
\\                               or                              \\
/                     Interface Identifier(s)                   /
\\                                                               \\
\f(CB\
+-------------------------------+-------------------------------+
|          Tag = 0x0018         |            Length             |
+- - - - - - - - - - - - - - - -+- - - - - - - - - - - - - - - -+
\\                                                               \\
/                           Load Selector                       /
\\                                                               \\
+-------------------------------+-------------------------------+
\f(CR\
|          Tag = 0x0004         |            Length             |
+- - - - - - - - - - - - - - - -+- - - - - - - - - - - - - - - -+
\\                                                               \\
/                            Info String                        /
\\                                                               \\
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
.fi
.sz +2
.)c
.)b
.lp
.(d
.#v
.ip \*#
\fB\)EDITOR'S NOTE:- \fR The parameter tag values shown as \f(CR\)0x0018\fR)
will be assigned by IANA within the common parameter range of the
SIGTRAN UAs and may change its value in further versions of this document.
.)d
.pp
The \fI\)Load Selector\fR parameter is used by the SGP in the \fI\)ASPAC ACK\fR
message to indicate the range of traffic for which the SGP has activated the
ASP.  The Application Servers for which the \fI\)Load Selectors\fR apply is
either indicated in the \fI\)ASPAC ACK\fR message by providing the associated
\fI\)Routing Context\fR (\fI\)Interface Identifier(s)\fR) or, if there is no
\fI\)Routing Context\fR (\fI\)Interface Identifier\fR) parameter in the
\fI\)ASPAC ACK\fR message, the associated Application Servers are implied by SGP and ASP
configuration data.  (See Section 4.1.5 \- "ASP Active Procedures".)
.pp
No other changes to the \fI\)ASPAC ACK\fR message format are provided by this
extension.
.sh 3 "ASP Inactive (ASPIA)"
.pp
\fI\)LOADSEL\fR supplements the \fI\)ASP Inactive (ASPIA)\fR message by
permitting the following parameters to be included in the \fI\)ASPIA\fR message:
.ix +4
.TS
tab(:);
lbss
lw(2.5i)lc.
Extension Parameters
_
Load Selector:Optional:
.TE
.ix -4
.lp
The format of the resulting \fI\)ASPIA\fR message is as follows: \*(#u\*#
.(b L
.(c
.nf
.sz -2
\fC\
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\\                                                               \\
/                         Routing Context                       /
\\                               or                              \\
/                     Interface Identifier(s)                   /
\\                                                               \\
\f(CB\
+-------------------------------+-------------------------------+
|          Tag = 0x0018         |            Length             |
+- - - - - - - - - - - - - - - -+- - - - - - - - - - - - - - - -+
\\                                                               \\
/                           Load Selector                       /
\\                                                               \\
+-------------------------------+-------------------------------+
\f(CR\
|          Tag = 0x0004         |            Length             |
+- - - - - - - - - - - - - - - -+- - - - - - - - - - - - - - - -+
\\                                                               \\
/                            Info String                        /
\\                                                               \\
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
.fi
.sz +2
.)c
.)b
.lp
.(d
.#v
.ip \*#
\fB\)EDITOR'S NOTE:- \fR The parameter tag values shown as \f(CR\)0x0018\fR)
will be assigned by IANA within the common parameter range of the
SIGTRAN UAs and may change its value in further versions of this document.
.)d
.pp
The \fI\)Load Selector\fR parameter is used by the ASP in the \fI\)ASPIA\fR
message to indicate the range of traffic for which the ASP is deactivating.
The Application Servers for which the \fI\)Load Selectors\fR apply is either
indicated in the \fI\)ASPIA\fR message by providing the associated
\fI\)Routing Context\fR (\fI\)Interface Identifiers\fR) or, if there is no
\fI\)Routing Context\fR (\fI\)Interface Identifier\fR) parameter in the
\fI\)ASPIA\fR message, the associated Application Servers are implied by SGP
and ASP configuration data.  (See Section 4.1.6 \- "ASP Inactive Procedures".)
.pp
No other changes to the \fI\)ASPIA\fR message format are provided by this
extension.
.sh 3 "ASP Inactive Ack (ASPIA ACK)"
.pp
\fI\)LOADSEL\fR supplements the \fI\)ASP Inactive Ack (ASPIA ACK)\fR message by
permitting the following parameters to be included in the \fI\)ASPIA ACK\fR message:
.ix +4
.TS
tab(:);
lbss
lw(2.5i)lc.
Extension Parameters
_
Load Selector:Optional:
.TE
.ix -4
.lp
The format of the resulting \fI\)ASPIA ACK\fR message is as follows: \*(#u\*#
.(b L
.(c
.nf
.sz -2
\fC\
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
\\                                                               \\
/                         Routing Context                       /
\\                               or                              \\
/                     Interface Identifier(s)                   /
\\                                                               \\
\f(CB\
+-------------------------------+-------------------------------+
|          Tag = 0x0018         |            Length             |
+- - - - - - - - - - - - - - - -+- - - - - - - - - - - - - - - -+
\\                                                               \\
/                           Load Selector                       /
\\                                                               \\
+-------------------------------+-------------------------------+
\f(CR\
|          Tag = 0x0004         |            Length             |
+- - - - - - - - - - - - - - - -+- - - - - - - - - - - - - - - -+
\\                                                               \\
/                            Info String                        /
\\                                                               \\
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
.fi
.sz +2
.)c
.)b
.lp
.(d
.#v
.ip \*#
\fB\)EDITOR'S NOTE:- \fR The parameter tag values shown as \f(CR\)0x0018\fR)
will be assigned by IANA within the common parameter range of the
SIGTRAN UAs and may change its value in further versions of this document.
.)d
.pp
The \fI\)Load Selector\fR parameter is used by the SGP in the \fI\)ASPIA ACK\fR
message to indicate the range of traffic for which the SGP has deactivated the
ASP.  The Application Servers for which the \fI\)Load Selectors\fR apply is
either indicated in the \fI\)ASPIA ACK\fR message by providing the associated
\fI\)Routing Context\fR (\fI\)Interface Identifiers\fR) or, if there is no
\fI\)Routing Context\fR (\fI\)Interface Identifier\fR) parameter in the
\fI\)ASPIA ACK\fR message, the associated Application Servers are implied by SGP and ASP
configuration data.  (See Section 4.1.6 \- "ASP Inactive Procedures".)
.pp
No other changes to the \fI\)ASPIA ACK\fR message format are provided by this
extension.
.sh 3 "Error (ERR)"
.pp
\fI\)LOADSEL\fR supplements the \fI\)Error (ERR)\fR message by adding the
following values to the common mandatory \fI\)Error Code\fR parameter in the
\fI\)ERR\fR message:
.ix +4
.TS
tab(:);
nl.
29:Invalid Load Selector \*#
.TE
.lp
.(d
.#v
.ip \*#
\fB\)EDITOR'S NOTE:- \fR The \fI\)Error Code\fR value shown as \f(CR\)29\fR)
will be assigned by IANA as a value of the common \fI\)Error Code\fR
parameter for SIGTRAN UAs and may change its value in further versions of this
document.
.)d
.lp
These new error codes are interpreted as follows: \*(#u
.lp
The \fI\)"Invalid Load Selector"\fR error
.ix +4
would be sent in an \fI\)ERR\fR message if the SG determines that one or more
\fI\)Load Selectors\fR in the \fI\)Load Selector\fR parameter provided by
the ASP is invalid, is not configured, or cannot be supported.
.pp
No other changes to the \fI\)ERR\fR message or \fI\)Error Code\fR parameter
format are provided by this extension.  See Section 4 for extension procedures
associated with the \fI\)ERR\fR message.
.sh 3 "Notify (NTFY)"
.pp
\fI\)LOADSEL\fR supplements the \fI\)Notify (NTFY)\fR message by permitting the
following parameters to be included in the \fI\)NTFY\fR message:
.ix +4
.TS
tab(:);
lbss
lw(2.5i)lc.
Extension Parameters
_
Load Selector:Optional:
.TE
.ix -4
.lp
The format of the resulting \fI\)NTFY\fR message is as follows: \*(#u\*#
.(b L
.(c
.nf
.sz -2
\fC\
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|          Tag = 0x000d           |         Length = 8          |
+- - - - - - - - - - - - - - - - -+- - - - - - - - - - - - - - -+
|           Status Type           |     Status Information      |
+---------------------------------+-----------------------------+
|          Tag = 0x0012           |         Length = 8          |
+- - - - - - - - - - - - - - - - -+- - - - - - - - - - - - - - -+
|                          ASP Identifier                       |
+---------------------------------------------------------------+
\\                                                               \\
/                         Routing Context                       /
\\                               or                              \\
/                     Interface Identifier(s)                   /
\\                                                               \\
\f(CB\
+---------------------------------+-----------------------------+
|          Tag = 0x0018           |          Length             |
+- - - - - - - - - - - - - - - - -+- - - - - - - - - - - - - - -+
\\                                                               \\
/                           Load Selector                       /
\\                                                               \\
+---------------------------------+-----------------------------+
\f(CR\
|          Tag = 0x0004           |          Length             |
+- - - - - - - - - - - - - - - - -+- - - - - - - - - - - - - - -+
\\                                                               \\
/                            Info String                        /
\\                                                               \\
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
.fi
.sz +2
.)c
.)b
.lp
.(d
.#v
.ip \*#
\fB\)EDITOR'S NOTE:- \fR The parameter tag values shown as \f(CR\)0x0018\fR)
will be assigned by IANA within the common parameter range of the
SIGTRAN UAs and may change its value in further versions of this document.
.)d
.pp
The \fI\)Load Selector\fR parameter is used by the SGP in the \fI\)NTFY\fR
message to indicate the traffic load positions which led to or have
contributed to the change in state of an associated Application Server when
sending a \fI\)NTFY\fR message that indicates and Application Server state
change.  The Application Servers for which the \fI\)Load Selectors\fR apply is
either indicated in the \fI\)NTFY\fR message by providing the associated
\fI\)Routing Context\fR (\fI\)Interface Identifiers\fR) or, if there is no
\fI\)Routing Context\fR (\fI\)Interface Identifier\fR) parameter in the
\fI\)NTFY\fR message, the associated Application Servers are implied by SGP and ASP
configuration data.  (See Section 4.1.7 \- "Notification Procedures".)
.pp
No other changes to the \fI\)NTFY\fR message format are provided by this
extension.
.#e
.sh 1 "Procedures"
.rs #u
.ds #u \*#
.(d
.ip \*#
For a detailed description of these procedures, see Section 4 of the
SIGTRAN UA specifications cited under "References".
.[
iua-rfc
.]
.[
iua-bis
.]
.[
dua-05
.]
.[
v5ua-03
.]
.[
ietf-sigtran-gr303ua-00
.]
.[
m2ua-rfc
.]
.[
m3ua-rfc
.]
.[
sua-15
.]
.[
isua-01
.]
.[
tua-02
.]
.)d
.pp
\fI\)LOADSEL\fR provides for an additional level of
control over the traffic distribution patterns within an Application
Server.  \fI\)LOADSEL\fR provides the \fI\)Load Selector\fR parameter which
may be optionally included in the \fI\)ASPAC\fR, \fI\)ASPAC ACK\fR,
\fI\)ASPIA\fR, \fI\)ASPIA ACK\fR and \fI\)NTFY\fR messages.  In addition, it
provides procedures for use of the \fI\)Load Selector\fR parameter in
association with these messages.
.sh 2 "AS and ASP State Maintenance"
.pp
In addition to the SGP maintaining the state of each remote ASP in each
Application Server that the ASP is configured to receive traffic, under
\fI\)LOADSEL\fR, SGP \fB\)MAY\fR also maintain the state of each remote
ASP in each Load Selection within an Application server that the ASP is
configured to receive traffic.  Aside from the procedures described in Section
4.1.7 "Notification Procedures", no management procedures are provided by
\fI\)LOADSEL\fR for maintaining the state of a Load Selection
within an Application Server.  The Load Selection state is maintained
separate from the ASP and AS states.
.sh 3 "ASP State"
.pp
\fI\)LOADSEL\fR uses the existing UA
.[
iua-rfc
.]
.[
iua-bis
.]
.[
dua-05
.]
.[
v5ua-03
.]
.[
ietf-sigtran-gr303ua-00
.]
.[
m2ua-rfc
.]
.[
m3ua-rfc
.]
.[
sua-15
.]
.[
isua-01
.]
.[
tua-02
.]
definitions and procedures with regard to ASP State.
.sh 3 "AS State"
.pp
The state of the Application Server is maintained in the Signalling User
Adaptation Layer on the SGPs.  The state of the Application Server changes due
to ASP state transitions.  The possible states of an Application Server
using \fI\)LOADSEL\fR are:
.ip "\fB\)AS-DOWN\fR:" 16
The Application Server is unavailable.  This state implies that all related
ASPs are in the \fB\)ASP-DOWN\fR state for this AS.  Initially, the AS will be in this
state.  An Application Server is in the \fB\)AS-DOWN\fR state when it is removed from
a configuration.
.ip "\fB\)AS-INACTIVE\fR:" 16
The Application Server is available but no application traffic is active (i.e,
one or more related ASPs are in the \fB\)ASP-INACTIVE\fR state, but there is no ASP in
the \fB\)ASP-ACTIVE\fR state).  The recovery timer T(r) is not running or has expired.
.ip "\fB\)AS-ACTIVE\fR:" 16
The Application Server is available and application traffic is active.  This
state implies that there is at least one ASP in the \fB\)ASP-ACTIVE\fR state within
the AS.
.ip "\fB\)AS-PENDING\fR:" 16
An active ASP has transition to \fB\)ASP-INACTIVE\fR or \fB\)ASP-DOWN\fR and it was the last
remaining active ASP for a Load Selection in the AS.  A recovery timer
T(r) \fB\)SHOULD\fR be started and all incoming signalling messages
\fB\)SHOULD\fR be queue by the SGP for each of the Load Selections for
which there is no ASP in the \fB\)ASP-ACTIVE\fR state.  If an ASP becomes \fB\)ASP-ACTIVE\fR
for each Load Selection in the AS before T(r) expires, the AS is moved
to the \fB\)AS-ACTIVE\fR state and all the queued messages for the Load
Selection will be sent to the newly active ASPs on each Load
Selection.
.sh 3 "ASP Up Procedures"
.pp
When an SGP receives an ASP Up messages from an ASP and the ASP is configured
at the SGP in one or more Load Selections associated with one or more
Application Servers, if the ASP is not already in the \fB\)ASP-INACTIVE\fR state for
the associated Application Servers, the SGP moves the ASP into the
\fB\)ASP-INACTIVE\fR state for the configured Load Selections within the
associated Application Servers.  In any event, the SGP responds with an
\fI\)ASPUP ACK\fR message.
.pp
If the ASP transition to the \fB\)ASP-INACTIVE\fR state within these Load
Selections results in a state change in the associated Application Servers,
the SGP moves the Application Server to the \fB\)AS-INACTIVE\fR state.  If the ASP
transition to the \fB\)ASP-INACTIVE\fR state for the given Load Selection
within an associated Application Server results in a change in state of the AS
(or the Load Selections associated with the AS), the SGP also follows
the "Notification Procedures" (described in Section 4.1.7) for the Application
Server.
.pp
Otherwise, the "ASP Up Procedures" described by the UAs \*(#u apply also to
\fI\)LOADSEL\fR.
.sh 3 "ASP Down Procedures"
.pp
When an SGP receives an ASP Down messages from an ASP and the ASP is
configured at the SGP in one or more Load Selections associated with
one or more Application Servers, if the ASP is not already in the \fB\)ASP-DOWN\fR
state for the associated Application Servers, the SGP moves the ASP to the
\fB\)ASP-DOWN\fR state for the configured Load Selections within the associated
Application Servers.  In any event, the SGP responds with an ASP Down Ack.
.pp
If the ASP transition to the \fB\)ASP-DOWN\fR state within these Load
Selections results in a state change in the associated Application Servers,
the SGP moves the Application Server to the \fB\)AS-DOWN\fR state.
.pp
Otherwise, the "ASP Down Procedures" described by the UAs \*(#u apply also to
\fI\)LOADSEL\fR.
.sh 3 "ASP Active Procedures"
.pp
When an ASP wishes to activate for a set of Load Selections associated
with an Application Server, it includes the \fI\)Load Selector\fR parameter in
the \fI\)ASPAC\fR message.
.pp
When an SGP receives and \fI\)ASPAC\fR message requesting activation for a set
of Load Selections within an AS or the SG otherwise activates the ASP for a
set of Load Selections within an AS, the SG sends an \fI\)ASPAC ACK\fR message
including the \fI\)Load Selector\fR parameter indicating the Load Selections
for which the ASP has been activated.  If the SGP is responding to an ASP that
included the \fI\)Load Selector\fR parameter in the \fI\)ASPAC\fR message, the
SG \fB\)MUST\fR include the \fI\)Load Selector\fR parameter in the response
\fI\)ASPAC ACK\fR message.
.pp
If the \fI\)Load Selector\fR included in an \fI\)ASPAC\fR message contains
invalid information or indicate an unsupported Load Selection, or a \fI\)Load
Selector\fR parameter required by the SGP is missing, the SGP replies to the
\fI\)ASPAC\fR message with an \fI\)ERR\fR("Invalid Load Selector") message and
takes no further action with regard to AS or ASP state.
.pp
The Application Servers associated with the \fI\)Load Selector\fR is
indicated in the \fI\)ASPAC (ACK)\fR message by \fI\)Routing Context\fR
(\fI\)Interface Identifiers\fR) or, when the \fI\)Routing Context\fR
(\fI\)Interface Identifier\fR) parameter is missing from the \fI\)ASPAC
(ACK)\fR message, is implied by ASP and SGP configuration data.  When the
\fI\)Load Selector\fR parameter is included in the \fI\)ASPAC (ACK)\fR
message, the \fI\)Routing Context\fR (\fI\)Interface Identifier\fR) parameter
or implicit configuration data \fB\)SHOULD\fR be associated with a single
Application Server.
.pp
If the ASP transition to the \fB\)ASP-ACTIVE\fR state for the given Load
Selections within an associated Application Server results in a change in
state of the AS (or the Load Selections associated with the AS), the
SGP follows the "Notification Procedures" (described in Section 4.1.7) for the
Application Server.
.pp
Otherwise, the "ASP Active Procedures" described by the UAs \*(#u apply also
to \fI\)LOADSEL\fR.
.sh 3 "ASP Inactive Procedures"
.pp
When an ASP wishes to deactivate for a set of Load Selections associated
with an Application Server, it includes the \fI\)Load Selector\fR parameter in
the \fI\)ASPIA\fR message.
.pp
When an SGP receives an \fI\)ASPIA\fR message requesting deactivation for a
set of Load Selections within an AS or the SG otherwise deactivates the ASP
for a set of Load Selections within an AS, the SG sends an \fI\)ASPIA ACK\fR
message including the \fI\)Load Selector\fR parameter for which the ASP has
been deactivated.  If the SGP is responding to an ASP that included the
\fI\)Load Selector\fR parameter in the \fI\)ASPIA\fR message, the SG
\fB\)MUST\fR include the \fI\)Load Selector\fR parameter in the response
\fI\)ASPIA ACK\fR message.
.pp
If the SGP receives an \fI\)ASPIA\fR message from an ASP that is active for
a set of Load Selections associated with the Application Server for
which the ASP is requesting deactivation, and the \fI\)Load Selector\fR
parameter is not present in the \fI\)ASPIA\fR message, the SGP will interpret
this as a request to deactivate the ASP for all the Load Selections
associated with the Application Server for which the ASP is active.
.pp
If the \fI\)Load Selector\fR included in an \fI\)ASPAC\fR message contains
invalid information or indicates an unsupported \fI\)Load Selector\fR, the SGP
replies to the \fI\)ASPAC\fR message with an \fI\)ERR\fR("Invalid Load
Selector") message and takes no further action with regard to AS or ASP state.
.pp
The Application Servers associated with the \fI\)Load Selector\fR is
indicated in the \fI\)ASPIA (ACK)\fR message by \fI\)Routing Context\fR
(\fI\)Interface Identifiers\fR) or, when the \fI\)Routing Context\fR
(\fI\)Interface Identifier\fR) parameter is missing from the \fI\)ASPIA
(ACK)\fR message, is implied by ASP and SGP configuration data.  When the
\fI\)Load Selector\fR parameter is included in the \fI\)ASPIA (ACK)\fR
message, the \fI\)Routing Context\fR (\fI\)Interface Identifier\fR) parameter
or implicit configuration data \fB\)SHOULD\fR be associated with a single
Application Server.
.pp
If the ASP transition to the \fB\)ASP-INACTIVE\fR state for the given Load
Selections within an associated Application Server results in a change in
state of the AS (or the Load Selections associated with the AS), the
SGP follows the "Notification Procedures" (described in Section 4.1.7) for the
Application Server.
.pp
Otherwise, the "ASP Inactive Procedures" described by the UAs \*(#u apply also
to \fI\)LOADSEL\fR.
.sh 3 "Notify Procedures"
.sh 4 "AS State Change"
.pp
When an ASP makes a state transition and is configured for a set of Load
Selections in one or more Application Servers, the ASP state transition may
result in a change to the state of the associated Application Servers, or
Load Selections within those AS, at the SGP.  When a recovery timer
T(r) expires, the associated Application Server will transition from the
\fB\)AS-PENDING\fR state to the \fB\)AS-INACTIVE\fR state.
.pp
Whenever an AS changes state, or the condition of the AS Load
Selections perpetuating the current AS state changes, the SGP \fB\)MUST\fR
notify all ASPs not in the \fB\)ASP-DOWN\fR state configured for the Application
Server by sending a \fI\)Notify (NTFY)\fR message to each indicating the state
of the Application Server in the \fI\)Status Information\fR field of the
\fI\)Status\fR parameter in the \fI\)NTFY\fR message.
.pp
When an Application Server is configured for \fI\)LOADSEL\fR, the SGP
\fB\)MUST\fR also include a list of Load Selections in the \fI\)Load
Selector\fR parameter for which the
Application Server is configured that caused the AS state change or is
perpetuating the AS state.
.pp
The SGP includes the \fI\)Routing Context\fR (\fI\)Interface Identifiers\fR)
that identifies the Application Server for which the \fI\)NTFY\fR message is
being sent.  If, however, the ASP is not configured for more than one
Application Server, the \fI\)Routing Context\fR (\fI\)Interface Identifier\fR)
\fB\)MAY\fR be excluded from the \fI\)NTFY\fR message as it is implied by configuration
data.
.pp
Otherwise, the "Notification Procedures" described by the UAs \*(#u apply also
to \fI\)LOADSEL\fR.
.pp
Examples are given in Section 5.
.(d
.ip \*#
\fB\)EXAMPLE:-\fR
An ASP (e.g, ASP-1) moving to state \fB\)ASP-INACTIVE\fR within a \fI\)Load
Selector\fR (e.g, LS-1) results in the state of the AS moving to \fB\)AS-PENDING\fR.
The SGP sends NTFY("Application Server Pending") with "LS-1" in the \fI\)Load
Selector\fR parameter in the \fI\)NTFY\fR message.  If immediately after (and before
T(r) expires) another ASP (e.g, ASP-2) moves to state \fB\)ASP-INACTIVE\fR within
another \fI\)Load Selector\fR (e.g, LS-2) resulting the state of the AS being
"held" in the \fB\)AS-PENDING\fR state, the SGP sends NTFY("Application Server
Pending") again, but this time includes both "LS-1" and "LS-2" in the
\fI\)Load Selector\fR parameter in the \fI\)NTFY\fR message.

\fB\)EXAMPLE:-\fR
When all ASPs are inactive for a Load Selection within an Override AS,
the AS will transition to the \fB\)AS-PENDING state\fR.  The SGP will send a
NTFY("Application Server Pending") message to all ASPs configured for the
Application Server that are not in the \fB\)ASP-DOWN\fR state.  This message should
include in the \fI\)Load Selector\fR parameter the Load Selections in
which there is no ASP in the \fB\)ASP-ACTIVE\fR state for the AS.
.)d
.sh 4 "ASP Override"
.pp
Whenever an ASP becomes active for a Load Selection in an Override
Application Server, the \fI\)Load Selector\fR \fB\)MUST\fR be placed in a
\fI\)NTFY\fR message with a \fI\)Status Information\fR indicating "Alternate
ASP active in AS", along with the \fI\)Routing Context\fR (\fI\)Interface
Identifiers\fR) for the associated AS and any \fI\)ASP Identifier\fR
associated with the ASP for which the notification is being given.
.pp
Otherwise, the "Notification Procedures" described by the UAs \*(#u apply also
to \fI\)LOADSEL\fR.
.sh 3 "Registration Procedures"
.pp
\fI\)LOADSEL\fR provides the ability for the ASP to obtain a \fI\)Load
Selector\fR value for a given range of traffic (\fI\)Load Selection\fR) using
dynamic registration.
.pp
When the ASP wishes to register a \fI\)Load Selector\fR as part of the normal
registration procedure, it includes the \fI\)Load Selection\fR parameter in the 
\fI\)REG REQ\fR message to the SGP.  The \fI\)Load Selection\fR parameter
describes the range of traffic load for which the ASP wishes to obtain a
\fI\)Load Selector\fR value.
.pp
When an SGP receives a \fI\)REG REQ\fR message with a \fI\)Load Selection\fR
parameter, it will determine whether the \fI\)Load Selection\fR parameter
describes a  non-overlapping load selection and then, if the registration of
the associated \fI\)Routing Key\fR is successful, it assigns a \fI\)Load
Selector\fR to the traffic range and returns the value in the \fI\)Load
Selector\fR parameter in the \fI\)REG RSP\fR message.
.pp
In addition to the normal registration procedures of the UAs, the following
additional error conditions can occur:
.ip "\fI""Error \- Unsupported Load Selection""\fR" 3
.ip "" 3
This error \fB\)MUST\fR be sent in an \fB\)Registration Response (REG RSP)\fR
message whenever the SG determines that the \fI\)Load Selection\fR provided in
a \fB\)REG REQ\fR message has not been configured and the SG does not support
dynamic allocation of \fI\)Load Selectors\fR for the specified Key, and
\fB\)MUST\fR be sent in an \fB\)Registration Response (REG RSP)\fR message
whenever the SG determines that the \fI\)Load Selection\fR provided in a
\fB\)REG REQ\fR message is not supported by the SG.
.ip "\fI""Error \- Invalid Load Selection.""\fR" 3
.ip "" 3
If the SGP determines that the received \fI\)Load Selection\fR data is
invalid, or contains invalid parameter values, the SGP returns a
\fI\)Registration Response (REG RSP)\fR message to the ASP containing a
\fI\)Registration Result\fR "Error \- Invalid Load Selection".
.ip "\fI""Error \- Cannot Support Unique Loadsharing.""\fR" 3
.ip "" 3
If the SGP determines that a unique \fI\)Load Selection\fR cannot be created,
the SGP returns a \fI\)Registration Response (REG RSP)\fR message to the ASP,
with a \fI\)Registration Status\fR of "Error \- Cannot Support Unique
Loadsharing." An incoming signalling message received at an SGP should not
match against more than one \fI\)Load Selection\fR.
.ip "\fI""Error \- Unsupported LS Parameter Field.""\fR" 3
.ip "" 3
If the SGP determines that one or more of the \fI\)Load Selection\fR
parameters are not supported for the purpose of creating new Load Selection
entries, the SGP returns a \fI\)Registration Response (REG RSP)\fR message to
the ASP, containing a \fI\)Registration Result\fR "Error \- Unsupported LS
Parameter Field".  This result \fB\)MAY\fR be used if, for example, the SGP
does not support the \fI\)CIC Range\fR parameter.
.pp
Otherwise, the "Registration Procedures" described by the UAs \*(#u apply also to
\fI\)LOADSEL\fR.
.sh 2 "Interworking Procedures"
.pp
\fI\)LOADSEL\fR supports the ASP Extension procedures described in
ASPEXT
.[
aspext-02
%Z 2
.]
and defines the following \fI\)ASP Extension\fR value:
.ix +4
.TS
tab(:);
nl.
1:LOADSEL Extension
.TE
.pp
The following procedures may be used where the \fI\)ASPEXT\fR procedures are
not used:
.pp
Whenever an ASP receives an \fI\)ASPIA ACK\fR not containing a \fI\)Load
Selector\fR parameter in response to an \fI\)ASPAC\fR containing the
parameter, the ASP will assume that the the SGP or IPSP does not support
\fI\)LOADSEL\fR and \fB\)MUST\fR fall back to the non-Load Selection UA
procedures.
.pp
Whenever an ASP receives an \fI\)ERR\fR message or an unsuccessful \fI\)REG
RSP\fR message indicating a problem with the \fI\)Load Selection\fR parameter
in the \fI\)REG REQ\fR message, the ASP will assume that the SGP or IPSP does
not support \fI\)LOADSEL\fR and \fB\)MUST\fR fall back to the non-Load
Selection UA procedures.
.#e
.sh 1 "Examples"
.pp
\fI\*(&f\n(&n\fR illustrates the example configuration that is used for all
the examples in this section.  The example configuration consist of:
.bu
Two SGs (SG1 and SG2) acting as STPs in the SS7 network and consisting (for
example) of a single SGP.  Each SG is connected to each of the ASPs in the
example configuration.
.bu
Four ASPs (ASP1, ASP2, ASP3 and ASP4).  Each ASP is connected to both of the
SGs in the example configuration.
.bu
Two Load Selections (LS1 and LS2) are associated with the Application Server.
The traffic that corresponds to each Load Selections is different in each
example.
.(z M
.ie '\*(.T'ps' \{\
.so loadsel-02.fig3.pic
.\}
.el \{\
.(c
.nf
.sz -2
\fC\
                      SCTP
                      Associations  ________      _________
           _________   ............|        |    /         \\
          |         |..:    .......|  ASP1  |   |    AS1    |
          |         |.....  :      |________|   |           |
  ________|   SG1   |....:  :                   | ......... |
         /|         |...::  :       ________    | :       : |
  \\     / |_________|  :::..:......|        |   | :  LS1  : |
   \\   /       |       ::   :......|  ASP2  |   | :.......: |
    \\ /        |       ::   ::     |________|   |           |
     X         |       ::   ::                  |           |
    / \\        |       ::   ::      ________    |           |
   /   \\   ____|____   ::...::.....|        |   |           |
  /     \\ |         |..:....::.....|  ASP3  |   | ......... |
  _______\\|         |..:.....::    |________|   | :       : |
          |   SG2   |..:......:                 | :  LS2  : |
          |         |..:.....       ________    | :.......: |
          |_________|  :....:......|        |   |           |
                            :......|  ASP4  |   |           |
                                   |________|    \\_________/
.fi
.sz +2
.)c
.\}
.#f "Example Configuration"
.)z
.(b M
.sh 3 "Initialization"
.(l
.ie '\*(.T'ps' \{\
.so loadsel-02.fig4.pic
.\}
.el \{\
.(c
.nf
.sz -2
\fC\
SG1   SG2                           ASP1  ASP2  ASP3  ASP4      AS1
 :     :                             :     :     :     :         :
 :<----:-Establish Association------>:     :     :     :         :
 :<----:-ASPUP-----------------------:     :     :     :         :
 :-----:-ASPUP ACK------------------>:     :     :     :         :
 :     :                             :     :     :     :         :
 :<----:-Establish Association-------:---->:     :     :         :
 :<----:-ASPUP-----------------------:-----:     :     :         :
 :-----:-ASPUP ACK-------------------:---->:     :     :         :
 :     :                             :     :     :     :         :
 :<----:-Establish Association-------:-----:---->:     :         :
 :<----:-ASPUP-----------------------:-----:-----:     :         :
 :-----:-ASPUP ACK-------------------:-----:---->:     :         :
 :     :                             :     :     :     :         :
 :<----:-Establish Association-------:-----:-----:---->:         :
 :<----:-ASPUP-----------------------:-----:-----:-----:         :
 :-----:-ASPUP ACK-------------------:-----:-----:---->:         :
 :     :                             :     :     :     :         :
 :     : (Same message exchange for SG2)   :     :     :         :
 :     :                             :     :     :     :         :
.fi
.sz +2
.)c
.\}
.#f "Example \- Initialization"
.)l
.)b
.pp
\fI\*(&f\n(&p\fR illustrates the common initialization procedure use for all
of the examples.  Each ASP establishes an SCTP Association with SG1 and sends
an \fI\)ASPUP\fR message to which it receives and ASP Up response.  The ASPs are not
statically configured to serve specific AS or LS within the AS, so no Notify
messages are received.  The same sequence of messages are also exchanged with
SG2.
.sh 2 "M3UA with Override AS and Load Selection based on CIC"
.pp
This example is for an M3UA
.[
m3ua-rfc
.]
configuration with the Application Server (AS1) configured with a Traffic Mode
Type of Override.  The Application Server (AS1) has associated with it a
Routing Key (RK1) that consists of a Destination Point Code that corresponds
to the AS1 (MGC1) point code (PC1), an Originating Point Code that corresponds
to a remote MGC2 point code (PC2), and the SI value for ISUP (SI=5).  The Load
Selections (LS1 and LS2) correspond to two sets of CIC values which correspond
to two different trunk groups between MGC1 and MGC2 (TG1 and TG2).
.(b M
.sh 3 "Activation"
.(l
.ie '\*(.T'ps' \{\
.so loadsel-02.fig13.pic
.\}
.el \{\
.(c
.nf
.sz -2
\fC\
SG1   SG2                           ASP1  ASP2  ASP3  ASP4      AS1
 :     :                             :     :     :     :         :
 :<----:-ASPAC(LS1/RC1)--------------:     :     :     :         :
 :-----:-ASPAC ACK(LS1/RC1)--------->:     :     :     :         :
 :-----:-NTFY(AS_Act)(LS1/RC1)------>:     :     :     :  (LS1)  :
 :     :                             :     :     :     :         :
 :<----:-DATA----------------------->:<----:-----:-----:-------->:
 :     :                             :     :     :     :         :
 :<----:-ASPAC(LS2/RC1)--------------:-----:     :     :         :
 :-----:-ASPAC ACK(LS2/RC1)----------:---->:     :     :         :
 :-----:-NTFY(AS_Act)(LS1,LS2/RC1)-->:     :     :     :         :
 :-----:-NTFY(AS_Act)(LS1,LS2/RC1)---:---->:     :     :  (LS2)  :
 :     :                             :     :     :     :         :
 :<----:-DATA------------------------:---->:<----:-----:-------->:
 :     :                             :     :     :     :         :
 :<----:-ASPIA(LS1/RC1)--------------:-----:-----:     :         :
 :-----:-ASPIA ACK(LS1/RC1)----------:-----:---->:     :         :
 :-----:-NTFY(AS_Act)(LS1,LS2/RC1)---:-----:---->:     :         :
 :     :                             :     :     :     :         :
 :<----:-ASPIA(LS1,LS2/RC1)----------:-----:-----:-----:         :
 :-----:-ASPIA ACK(LS1,LS2/RC1)------:-----:-----:---->:         :
 :-----:-NTFY(AS_Act)(LS1,LS2/RC1)---:-----:-----:---->:         :
 :     :                             :     :     :     :         :
 :     : (Same message exchange for SG2)   :     :     :         :
 :     :                             :     :     :     :         :
.fi
.sz +2
.)c
.\}
.#f "M3UA Example \- Activation"
.)l
.)b
.pp
\fI\*(&f\n(&p\fR illustrates activation of the ASPs for Load Selections within
the Override Application Server.  The sequence of events is as follows:
.np
ASP1 sends an \fI\)ASPAC\fR message to SG1 identifying Load Selection LS1 within
Application Server AS1/RC1 and receives an acknowledgment and a notification.
Data is transferred between the SG and ASP1 for Load Selection LS1 within AS1. 
.np
ASP2 sends an \fI\)ASPAC\fR message to SG1 identifying Load Selection LS2 within
Application Server AS1/RC1 and receives an acknowledgment and a notification.
ASP1 also receives notification that AS1/RC1 is active for LS2.  Data is
transferred between the SG and ASP2 for Load Selection LS2 within AS1. 
.np
ASP3 sends an \fI\)ASPIA\fR message to SG1 identifying Load Selection LS1 within
Application Server AS1/RC1 and receives an acknowledgment and a notification.
.np
ASP4 sends an \fI\)ASPIA\fR message to SG1 identifying Load Selection LS1 and
LS2 within Application Server AS1/RC1 and receives an acknowledgment and a
notification.
.np
The same exchange is repeated for SG2.
.(b M
.sh 3 "Failure of ASP1"
.(l
.ie '\*(.T'ps' \{\
.so loadsel-02.fig6.pic
.\}
.el \{\
.(c
.nf
.sz -2
\fC\
SG1   SG2                           ASP1  ASP2  ASP3  ASP4      AS1
 :     :                             :     :     :     :         :
 :     :                             :     :     :     :  (LS1)  :
 :<----:-DATA----------------------->:<----:-----:-----:-------->:
 :     :                             :     :     :     :         :
 :<----:-COMM LOST----------XXXX-----:     :     :     :         :
 :-----:-NTFY(ASP Fail)(ASP1)--------:---->:     :     :         :
 :-----:-NTFY(ASP Fail)(ASP1)--------:-----:---->:     :         :
 :-----:-NTFY(ASP Fail)(ASP1)--------:-----:-----:---->:         :
 :-----:-NTFY(AS_Pending)(LS1/RC1)---:---->:     :     :         :
 :-----:-NTFY(AS_Pending)(LS1/RC1)---:-----:---->:     :         :
 :-----:-NTFY(AS_Pending)(LS1/RC1)---:-----:-----:---->:         :
 :     :                             :     :     :     :         :
 :<----:-ASPAC(LS1/RC1)--------------:-----:-----:-----:         :
 :-----:-ASPAC ACK(LS1/RC1)----------:-----:-----:---->:         :
 :-----:-NTFY(AS_Active)(LS1,LS2/RC1):---->:     :     :         :
 :-----:-NTFY(AS_Active)(LS1,LS2/RC1):-----:---->:     :         :
 :-----:-NTFY(AS_Active)(LS1,LS2/RC1):-----:-----:---->:         :
 :     :                             :     :     :     :  (LS1)  :
 :<----:-DATA------------------------:-----:-----:---->:<------->:
 :     :                             :     :     :     :         :
.fi
.sz +2
.)c
.\}
.#f "M3UA Example \- Failure of ASP1"
.)l
.)b
.pp
\fI\*(&f\n(&p\fR illustrates the failure of ASP1.
The sequence of events is as follows:
.np
Data for LS1 within AS1 is exchanged between SG1 and ASP1.  Data for LS2
within AS1 is exchanged between SG1 and ASP2.
.np
Communication is lost between SG1 and ASP1.  ASP2, ASP3, and ASP4 are notified
of the failure of ASP1 and the change of state of AS1 to \fB\)AS-PENDING\fR for LS1.
Data for LS2 in AS1 is unaffected.
.np
ASP4 (spare) responds to the \fB\)AS-PENDING\fR notification and activates for LS1 in
AS1/RC1.  ASP2, ASP3 and ASP4 receive an \fB\)AS-ACTIVE\fR notification.  Data for LS1
in AS1 is now exchanged with ASP4.
.(b M
.sh 3 "Sparing"
.(l
.ie '\*(.T'ps' \{\
.so loadsel-02.fig7.pic
.\}
.el \{\
.(c
.nf
.sz -2
\fC\
SG1   SG2                           ASP1  ASP2  ASP3  ASP4      AS1
 :     :                             :     :     :     :         :
 :     :                             :     :     :     :  (LS1)  :
 :<----:-DATA----------------------->:<----:-----:-----:-------->:
 :<----:-DATA----------------------->:<----:-----:-----:-------->:
 :     :                             :     :     :     :         :
 :<----:-ASPAC(LS1/RC1)--------------:-----:-----:-----:         :
 :-----:-ASPAC ACK(LS1/RC1)----------:-----:-----:---->:         :
 :-----:-NTFY(Alt ASP)(ASP4)-------->:     :     :     :         :
 :     :                             :     :     :     :  (LS1)  :
 :<----:-DATA------------------------:-----:-----:---->:<------->:
 :<----:-DATA------------------------:-----:-----:---->:<------->:
 :     :                             :     :     :     :         :
.fi
.sz +2
.)c
.\}
.#f "M3UA Example \- Sparing"
.)l
.)b
.pp
\fI\*(&f\n(&p\fR illustrates a sparing situation where one ASP takes over
traffic from another so that the original ASP can be taken out of service.
The sequence of events is as follows:
.np
Data for LS1 in AS1 is exchange between SG1 and ASP1.
.np
ASP4 (spare) activates for LS1 in AS1 and receives and acknowledgment.  ASP4
has overridden ASP1 and a notification is sent to ASP1 that indicates that
ASP4 in now the "Alternate ASP Active for AS".
.np
Data for LS1 in AS1 is now being exchanged between SG1 and ASP4.
.np
ASP1 can now be taken down and out of service.
.sh 2 "SUA with Load-share AS and Load Selection based on GT"
.pp
This example is for an SUA
.[
sua-15
.]
configuration with the Application Server (AS1)
configured with a Traffic Mode Type of Load-share.  The Application Server
(AS1) has associated with it (RK1) that consists of Destination Point Code
and Subsystem Number that corresponds to the AS1 (HLR1) point code (PC1).  The
Load Selections (LS1 and LS2) correspond to two sets of Global Titles which
correspond to Mobile and GSTN numbering.
.(b M
.sh 3 "Activation"
.(l
.ie '\*(.T'ps' \{\
.so loadsel-02.fig8.pic
.\}
.el \{\
.(c
.nf
.sz -2
\fC\
SG1   SG2                           ASP1  ASP2  ASP3  ASP4      AS1
 :     :                             :     :     :     :         :
 :<----:-ASPAC(LS1/RC1)--------------:     :     :     :         :
 :-----:-ASPAC ACK(LS1/RC1)--------->:     :     :     :         :
 :-----:-NTFY(AS_Act)(LS1/RC1)------>:     :     :     :         :
 :     :                             :     :     :     :  (LS1)  :
 :<----:-DATA----------------------->:<----:-----:-----:-------->:
 :     :                             :     :     :     :         :
 :<----:-ASPAC(LS2/RC1)--------------:-----:     :     :         :
 :-----:-ASPAC ACK(LS2/RC1)----------:---->:     :     :         :
 :-----:-NTFY(AS_Act)(LS1,LS2/RC1)-->:     :     :     :         :
 :-----:-NTFY(AS_Act)(LS1,LS2/RC1)---:---->:     :     :         :
 :     :                             :     :     :     :  (LS2)  :
 :<----:-DATA------------------------:---->:<----:-----:-------->:
 :     :                             :     :     :     :         :
 :<----:-ASPAC(LS1/RC1)--------------:-----:-----:     :         :
 :-----:-ASPAC ACK(LS1/RC1)----------:-----:---->:     :         :
 :-----:-NTFY(AS_Act)(LS1,LS2/RC1)---:-----:---->:     :         :
 :     :                             :     :     :     :  (LS1)  :
 :<----:-DATA----------------------->:<----:-----:-----:-------->:
 :<----:-DATA------------------------:-----:---->:<----:-------->:
 :     :                             :     :     :     :         :
 :<----:-ASPIA(LS1,LS2/RC1)----------:-----:-----:-----:         :
 :-----:-ASPIA ACK(LS1,LS2/RC1)------:-----:-----:---->:         :
 :-----:-NTFY(AS_Act)(LS1,LS2/RC1)---:-----:-----:---->:         :
 :     :                             :     :     :     :         :
 :     : (Same message exchange for SG2)   :     :     :         :
 :     :                             :     :     :     :         :
.fi
.sz +2
.)c
.\}
.#f "SUA Example \- Activation"
.)l
.)b
.pp
\fI\*(&f\n(&p\fR illustrates activation of the ASPs for Load Selections within
the Load-share Application Server.  The sequence of events is as follows:
.np
ASP1 sends an \fI\)ASPAC\fR message to SG1 identifying Load Selection LS1 within
Application Server AS1/RC1 and receives an acknowledgment and a notification.
Data is transferred between the SG and ASP1 for Load Selection LS1 within AS1. 
.np
ASP2 sends an \fI\)ASPAC\fR message to SG1 identifying Load Selection LS2 within
Application Server AS1/RC1 and receives an acknowledgment and a notification.
ASP1 also receives notification that AS1/RC1 is active for LS2.  Data is
transferred between the SG and ASP2 for Load Selection LS2 within AS1. 
.np
ASP3 sends an \fI\)ASPAC\fR message to SG1 identifying Load Selection LS1 within
Application Server AS1/RC1 and receives an acknowledgment and a notification.
Data is load-shared between the SG and ASP1 and ASP3 for Load Selection LS1
within AS1. 
.np
ASP4 sends an \fI\)ASPAC\fR message to SG1 identifying Load Selection LS1 and
LS2 within Application Server AS1/RC1 and receives an acknowledgment and a
notification.
.np
The same exchange is repeated for SG2.
.(b M
.sh 3 "Failure of ASP1 and ASP2"
.(l
.ie '\*(.T'ps' \{\
.so loadsel-02.fig9.pic
.\}
.el \{\
.(c
.nf
.sz -2
\fC\
SG1   SG2                           ASP1  ASP2  ASP3  ASP4      AS1
 :     :                             :     :     :     :         :
 :     :                             :     :     :     :  (LS1)  :
 :<----:-DATA----------------------->:<----:-----:-----:-------->:
 :<----:-DATA------------------------:-----:---->:<----:-------->:
 :     :                             :     :     :     :  (LS2)  :
 :<----:-DATA------------------------:---->:<----:-----:-------->:
 :     :                             :     :     :     :         :
 :<----:-COMM LOST----------XXXX-----:     :     :     :         :
 :-----:-NTFY(ASP Fail)(ASP1)--------:---->:     :     :         :
 :-----:-NTFY(ASP Fail)(ASP1)--------:-----:---->:     :         :
 :-----:-NTFY(ASP Fail)(ASP1)--------:-----:-----:---->:         :
 :     :                             :     :     :     :  (LS1)  :
 :<----:-DATA------------------------:-----:---->:<----:-------->:
 :<----:-DATA------------------------:-----:---->:<----:-------->:
 :     :                             :     :     :     :         :
 :<----:-COMM LOST----------XXXX-----:-----:     :     :         :
 :-----:-NTFY(ASP Fail)(ASP2)--------:-----:---->:     :         :
 :-----:-NTFY(ASP Fail)(ASP2)--------:-----:-----:---->:         :
 :-----:-NTFY(AS_Pending)(LS2/RC1)---:-----:---->:     :         :
 :-----:-NTFY(AS_Pending)(LS2/RC1)---:-----:-----:---->:         :
 :     :                             :     :     :     :         :
 :<----:-ASPAC(LS2/RC1)--------------:-----:-----:-----:         :
 :-----:-ASPAC ACK(LS2/RC1)----------:-----:-----:---->:         :
 :-----:-NTFY(AS_Active)(LS2/RC1)----:-----:---->:     :         :
 :-----:-NTFY(AS_Active)(LS2/RC1)----:-----:-----:---->:         :
 :     :                             :     :     :     :  (LS2)  :
 :<----:-DATA------------------------:-----:-----:---->:<------->:
 :     :                             :     :     :     :         :
.fi
.sz +2
.)c
.\}
.#f "SUA Example \- Failure of ASP1 and ASP2"
.)l
.)b
.pp
\fI\*(&f\n(&p\fR illustrates the failure of ASP1 followed by the failure of
ASP2.  The sequence of events is as follows:
.np
Data for LS1 within AS1 is load-shared between ASP1 and ASP3.  Data for LS2
within AS1 is exchanged with ASP2.
.np
Communication is lost between SG1 and ASP1.  ASP2, ASP3, and ASP4 are notified of
the failure of ASP1.  Data for LS1 in AS1 is directed toward ASP3 only.  Data
for LS2 in AS1 is unaffected.
.np
Communication is lost between SG1 and ASP2.  ASP3 and ASP4 are notified of the
failure of ASP1 as well of the AS1 state change to \fB\)AS-PENDING\fR.  Data for LS2
is queued at the SG.
.np
ASP4 (spare) responds to the \fB\)AS-PENDING\fR notification and activates for LS2 in
AS1/RC1.  ASP3 and ASP4 receive an \fB\)AS-ACTIVE\fR notification.  Data for LS2
in AS1 is now exchanged with ASP4.
.(b M
.sh 3 "Sparing"
.(l
.ie '\*(.T'ps' \{\
.so loadsel-02.fig10.pic
.\}
.el \{\
.(c
.nf
.sz -2
\fC\
SG1   SG2                           ASP1  ASP2  ASP3  ASP4      AS1
 :     :                             :     :     :     :         :
 :     :                             :     :     :     :  (LS1)  :
 :<----:-DATA----------------------->:<----:-----:-----:-------->:
 :<----:-DATA------------------------:-----:---->:<----:-------->:
 :     :                             :     :     :     :         :
 :<----:-ASPAC(LS1/RC1)--------------:-----:-----:-----:         :
 :-----:-ASPAC ACK(LS1/RC1)----------:-----:-----:---->:         :
 :     :                             :     :     :     :  (LS1)  :
 :<----:-DATA----------------------->:<----:-----:-----:-------->:
 :<----:-DATA------------------------:-----:---->:<----:-------->:
 :<----:-DATA------------------------:-----:-----:---->:<------->:
 :     :                             :     :     :     :         :
 :<----:-ASPIA(LS1/RC1)--------------:     :     :     :         :
 :-----:-ASPIA ACK(LS1/RC1)--------->:     :     :     :         :
 :     :                             :     :     :     :  (LS1)  :
 :<----:-DATA------------------------:-----:---->:<----:-------->:
 :<----:-DATA------------------------:-----:-----:---->:<------->:
 :     :                             :     :     :     :         :
.fi
.sz +2
.)c
.\}
.#f "SUA Example \- Sparing"
.)l
.)b
.pp
\fI\*(&f\n(&p\fR illustrates a sparing situation where one ASP takes over
traffic from another so that the original ASP can be taken out of service.
The sequence of events is as follows:
.np
Data for LS1 in AS1 is load-shared between SG1 and ASP1 and ASP3.
.np
ASP4 (spare) activates for LS1 in AS1 and receives and acknowledgment.
Data for LS1 in AS1 is now being load-shared between SG1 and ASP1, ASP3 and
ASP4.
.np
ASP1 deactivates for LS1 in AS1 and receives and acknowledgment but no
notification.
.np
Data or LS1 in AS1 is now load-shared between SG1 and ASP3 and ASP4.
.np
ASP1 can now be taken down and out of service.
.sh 2 "TUA with Broadcast AS and Load Selection based on DID"
.pp
This example is for an TUA
.[
tua-02
.]
configuration with the Application Server (AS1)
configured with a Traffic Mode Type of Broadcast.  The Application Server
(AS1) has associated with it (RK1) that consists of Destination Point Code
and Subsystem Number that corresponds to the AS1 (HLR1) point code (PC1).  The
Load Selections (LS1 and LS2) correspond to two sets of Dialog Ids which
correspond to even and odd Dialog Ids.
.(b M
.sh 3 "Activation"
.(l
.ie '\*(.T'ps' \{\
.so loadsel-02.fig11.pic
.\}
.el \{\
.(c
.nf
.sz -2
\fC\
SG1   SG2                           ASP1  ASP2  ASP3  ASP4      AS1
 :     :                             :     :     :     :         :
 :<----:-ASPAC(LS1/RC1)--------------:     :     :     :         :
 :-----:-ASPAC ACK(LS1/RC1)--------->:     :     :     :         :
 :-----:-NTFY(AS_Act)(LS1/RC1)------>:     :     :     :         :
 :     :                             :     :     :     :  (LS1)  :
 :<----:-DATA-(CorrId)-------------->:<----:-----:-----:-------->:
 :     :                             :     :     :     :         :
 :<----:-ASPAC(LS2/RC1)--------------:-----:     :     :         :
 :-----:-ASPAC ACK(LS2/RC1)----------:---->:     :     :         :
 :-----:-NTFY(AS_Act)(LS1,LS2/RC1)-->:     :     :     :         :
 :-----:-NTFY(AS_Act)(LS1,LS2/RC1)---:---->:     :     :         :
 :     :                             :     :     :     :  (LS2)  :
 :<----:-DATA-(CorrId)---------------:---->:<----:-----:-------->:
 :     :                             :     :     :     :         :
 :<----:-ASPAC(LS1/RC1)--------------:-----:-----:     :         :
 :-----:-ASPAC ACK(LS1/RC1)----------:-----:---->:     :         :
 :-----:-NTFY(AS_Act)(LS1,LS2/RC1)---:-----:---->:     :         :
 :     :                             :     :     :     :  (LS1)  :
 :<----:-DATA-(CorrId)---------------:-----:---->:<----:-------->:
 :     :                             :     :     :     :         :
 :<----:-ASPIA(LS1,LS2/RC1)----------:-----:-----:-----:         :
 :-----:-ASPIA ACK(LS1,LS2/RC1)------:-----:-----:---->:         :
 :-----:-NTFY(AS_Act)(LS1,LS2/RC1)---:-----:-----:---->:         :
 :     :                             :     :     :     :         :
 :     : (Same message exchange for SG2)   :     :     :         :
 :     :                             :     :     :     :         :
.fi
.sz +2
.)c
.\}
.#f "TUA Example \- Activation"
.)l
.)b
.pp
\fI\*(&f\n(&p\fR illustrates activation of the ASPs for Load Selections within
the Broadcast Application Server.  The sequence of events is as follows:
.np
ASP1 sends an \fI\)ASPAC\fR message to SG1 identifying Load Selection LS1 within
Application Server AS1/RC1 and receives an acknowledgment and a notification.
Data is transferred between the SG and ASP1 for Load Selection LS1 within AS1. 
The initial Data Messages for LS1 within AS1 are tagged with a \fI\)Correlation Id\fR.
.np
ASP2 sends an \fI\)ASPAC\fR message to SG1 identifying Load Selection LS2 within
Application Server AS1/RC1 and receives an acknowledgment and a notification.
ASP1 also receives notification that AS1/RC1 is active for LS2.  Data is
transferred between the SG and ASP2 for Load Selection LS2 within AS1. 
The initial Data Messages for LS2 within AS1 are tagged with a \fI\)Correlation Id\fR.
.np
ASP3 sends an \fI\)ASPAC\fR message to SG1 identifying Load Selection LS1 within
Application Server AS1/RC1 and receives an acknowledgment and a notification.
Data is broadcast the SG and ASP1 and ASP3 for Load Selection LS1 within AS1.
The initial Data Messages for LS1 within AS1 are tagged with a \fI\)Correlation Id\fR.
.np
ASP4 sends an \fI\)ASPIA\fR message to SG1 identifying Load Selection LS1 and
LS2 within Application Server AS1/RC1 and receives an acknowledgment and a
notification.
.np
The same exchange is repeated for SG2.
.(b M
.sh 3 "Failure of ASP1 and ASP2"
.(l
.ie '\*(.T'ps' \{\
.so loadsel-02.fig12.pic
.\}
.el \{\
.(c
.nf
.sz -2
\fC\
SG1   SG2                           ASP1  ASP2  ASP3  ASP4      AS1
 :     :                             :     :     :     :         :
 :     :                             :     :     :     :  (LS1)  :
 :<----:-DATA----------------------->:<----:---->:<----:-------->:
 :<----:-DATA----------------------->:<----:---->:<----:-------->:
 :     :                             :     :     :     :  (LS2)  :
 :<----:-DATA------------------------:---->:<----:-----:-------->:
 :     :                             :     :     :     :         :
 :<----:-COMM LOST----------XXXX-----:     :     :     :         :
 :-----:-NTFY(ASP Fail)(ASP1)--------:---->:     :     :         :
 :-----:-NTFY(ASP Fail)(ASP1)--------:-----:---->:     :         :
 :-----:-NTFY(ASP Fail)(ASP1)--------:-----:-----:---->:         :
 :     :                             :     :     :     :  (LS1)  :
 :<----:-DATA------------------------:-----:---->:<----:-------->:
 :<----:-DATA------------------------:-----:---->:<----:-------->:
 :     :                             :     :     :     :         :
 :<----:-COMM LOST----------XXXX-----:-----:     :     :         :
 :-----:-NTFY(ASP Fail)(ASP2)--------:-----:---->:     :         :
 :-----:-NTFY(ASP Fail)(ASP2)--------:-----:-----:---->:         :
 :-----:-NTFY(AS_Pending)(LS2/RC1)---:-----:---->:     :         :
 :-----:-NTFY(AS_Pending)(LS2/RC1)---:-----:-----:---->:         :
 :     :                             :     :     :     :         :
 :<----:-ASPAC(LS2/RC1)--------------:-----:-----:-----:         :
 :-----:-ASPAC ACK(LS2/RC1)----------:-----:-----:---->:         :
 :-----:-NTFY(AS_Active)(LS2/RC1)----:-----:---->:     :         :
 :-----:-NTFY(AS_Active)(LS2/RC1)----:-----:-----:---->:         :
 :     :                             :     :     :     :  (LS2)  :
 :<----:-DATA-(CorrId)---------------:-----:-----:---->:<------->:
 :     :                             :     :     :     :         :
.fi
.sz +2
.)c
.\}
.#f "TUA Example \- Failure of ASP1"
.)l
.)b
.pp
\fI\*(&f\n(&p\fR illustrates the failure of ASP1 followed by the failure of
ASP2.  The sequence of events is as follows:
.np
Data for LS1 within AS1 is broadcast to ASP1 and ASP3.  Data for LS2
within AS1 is exchanged with ASP2.
.np
Communication is lost between SG1 and ASP1.  ASP2, ASP3, and ASP4 are notified of
the failure of ASP1.  Data for LS1 in AS1 is directed toward ASP3 only.  Data
for LS2 in AS1 is unaffected.
.np
Communication is lost between SG1 and ASP2.  ASP3 and ASP4 are notified of the
failure of ASP1 as well of the AS1 state change to \fB\)AS-PENDING\fR.  Data for LS2
is queued at the SG.
.np
ASP4 (spare) responds to the \fB\)AS-PENDING\fR notification and activates for LS2 in
AS1/RC1.  ASP3 and ASP4 receive an \fB\)AS-ACTIVE\fR notification.  Data for LS2
in AS1 is now exchanged with ASP4.  Initial DATA messages for LS2 in AS1 are
tagged with a \fI\)Correlation Id\fR.
.(b M
.sh 3 "Sparing"
.(l
.ie '\*(.T'ps' \{\
.so loadsel-02.fig13.pic
.\}
.el \{\
.(c
.nf
.sz -2
\fC\
SG1   SG2                           ASP1  ASP2  ASP3  ASP4      AS1
 :     :                             :     :     :     :         :
 :     :                             :     :     :     :  (LS1)  :
 :<----:-DATA----------------------->:<----:-----:-----:-------->:
 :<----:-DATA------------------------:-----:---->:<----:-------->:
 :     :                             :     :     :     :         :
 :<----:-ASPAC(LS1/RC1)--------------:-----:-----:-----:         :
 :-----:-ASPAC ACK(LS1/RC1)----------:-----:-----:---->:         :
 :     :                             :     :     :     :  (LS1)  :
 :<----:-DATA----------------------->:<----:-----:-----:-------->:
 :<----:-DATA------------------------:-----:---->:<----:-------->:
 :<----:-DATA-(CorrId)---------------:-----:-----:---->:<------->:
 :     :                             :     :     :     :         :
 :<----:-ASPIA(LS1/RC1)--------------:     :     :     :         :
 :-----:-ASPIA ACK(LS1/RC1)--------->:     :     :     :         :
 :     :                             :     :     :     :  (LS1)  :
 :<----:-DATA------------------------:-----:---->:<----:-------->:
 :<----:-DATA------------------------:-----:-----:---->:<------->:
 :     :                             :     :     :     :         :
.fi
.sz +2
.)c
.\}
.#f "TUA Example \- Sparing"
.)l
.)b
.pp
\fI\*(&f\n(&p\fR illustrates a sparing situation where one ASP takes over
traffic from another so that the original ASP can be taken out of service.
The sequence of events is as follows:
.np
Data for LS1 in AS1 is broadcast from SG1 to ASP1 and ASP3.
.np
ASP4 (spare) activates for LS1 in AS1 and receives and acknowledgment.
Data for LS1 in AS1 is now being broadcast from SG1 to ASP1, ASP3 and
ASP4.  Initial data for LS1 in AS1 is tagged with a \fI\)Correlation Id\fR.
.np
ASP1 deactivates for LS1 in AS1 and receives and acknowledgment but no
notification.
.np
Data or LS1 in AS1 is now broadcast from SG1 to ASP3 and ASP4.
.np
ASP1 can now be taken down and out of service.
.#e
.sh 1 "Security"
.pp
\fI\)LOADSEL\fR does not introduce any new security risks or
considerations that are not already inherent in the UA
.[
iua-rfc
.]
.[
iua-bis
.]
.[
dua-05
.]
.[
v5ua-03
.]
.[
ietf-sigtran-gr303ua-00
.]
.[
m2ua-rfc
.]
.[
m3ua-rfc
.]
.[
sua-15
.]
.[
isua-01
.]
.[
tua-02
.]
Please see SIGTRAN Security document
.[
sigsec-03
%Z 1
.]
for security considerations and recommendations that are applicable to each UA.
.#e
.sh 1 "IANA Considerations"
.pp
\fI\)LOADSEL\fR
adds the following parameter tag value (described in Section 3) to the Common
Parameter numbering range of the SIGTRAN UAs:
.[
iua-rfc
.]
.[
iua-bis
.]
.[
dua-05
.]
.[
v5ua-03
.]
.[
ietf-sigtran-gr303ua-00
.]
.[
m2ua-rfc
.]
.[
m3ua-rfc
.]
.[
sua-15
.]
.[
isua-01
.]
.[
tua-02
.]
.ix +4
.TS
tab(:);
lblb
nl.
Tag Value\*#:Parameter Name
_
0x0018:Load Selector
0x0019:Load Selection
.TE
.lp
.(d
.#v
.ip \*#
\fB\)EDITOR'S NOTE:- \fR The \fI\)Load Selector\fR and \fI\)Load Selection\fR
tag values shown throughout this document as \f(CR\)0x0018\fR) and
\f(CR\)0x0019\fR) will be assigned by IANA within the common parameter range
of the SIGTRAN UAs and may change its value in further versions of this
document.
.)d
.pp
\fI\)LOADSEL\fR
adds the following value to the \fI\)Error Code\fR parameter (described in
Section 3 and 4) for the SIGTRAN UAs.
.[
iua-rfc
.]
.[
iua-bis
.]
.[
dua-05
.]
.[
v5ua-03
.]
.[
ietf-sigtran-gr303ua-00
.]
.[
m2ua-rfc
.]
.[
m3ua-rfc
.]
.[
sua-15
.]
.[
isua-01
.]
.[
tua-02
.]
.ix +4
.TS
tab(:);
nl.
29:Invalid Load Selector \*#
.TE
.lp
.(d
.#v
.ip \*#
\fB\)EDITOR'S NOTE:- \fR The \fI\)Error Code\fR value shown throughout this
document as \f(CR\)29\fR) will be assigned by IANA as a value of the common
\fI\)Error Code\fR parameter for SIGTRAN UAs and may change its value in
further versions of this document.
.)d
.pp
\fI\)LOADSEL\fR adds the following values to the \fI\)Registration Status\fR
field of the \fI\)Registration Result\fR parameter for the UAs.
.[
m2ua-rfc
.]
.[
m3ua-rfc
.]
.[
sua-15
.]
.[
isua-01
.]
.[
tua-02
.]
.ix +4
.TS H
tab(:);
nl.
.TH
12:Error \- Unsupported Load Selection \*#
13:Error \- Invalid Load Selection
14:Error \- Cannot Support Unique Loadsharing
15:Error \- Unsupported LS Parameter Field
.TE
.lp
.(d
.#v
.ip \*#
\fB\)EDITOR'S NOTE:- \fR The \fI\)Registration Status\fR values shown as
\f(CR\)12\fR, \f(CR\)13\fR, \f(CR\)14\fR and \f(CR\)15\fR will be
assigned by IANA as a value of each UA-specific \fI\)Registration Status\fR
parameter for each SIGTRAN UA and may change its value in further versions of
this document.
.)d
.\"
.\"
.#e
.(b M
.#v
.sh 1 "Revision History" 0
.pp
This section provides historical information on the changes made to this
draft.  This section will be removed from the document when the document is
finalized.
.sh 2 "Changes from Version 0.1 to Version 0.2" 0 2
.bu
added list of abbreviations.
.bu
moved history section here.
.bu
updated version numbers and dates.
.bu
updated references.
.bu
split reference section.
.bu
updated security section.
.bu
moved notes to end of document.
.sh 2 "Changes from Version 0.0 to Version 0.1" 0 1
.bu
added this section,
.bu
updated release version and dates,
.bu
updated references,
.bu
updated postscript diagrams,
.bu
minor formatting changes,
.bu
updated author's address.
.sh 2 "Version 0.0" 0 0
.pp
The initial version of this document.
.sh 3 "Change Log" 0 0 0
.lp
.(l I
.nf
\fC\s-3\
$Log: draft-bidulock-sigtran-loadsel-02.me,v $
Revision 0.9.2.2  2005/05/14 08:33:19  brian
- copyright header correction

Revision 0.9.2.1  2004/03/16 05:10:42  brian
- Added drafts and figures.

Revision 0.8.2.2  2003/08/01 12:23:15  brian
Added abbreviations, updated format.

.)l
.)b
.\"
.\"
.#E
.(b M
.#v
.[
$LIST$
.]
.)b
.(b L
.uh "Acknowledgments"
.pp
The authors would like to thank
Tolga Asveren,
Ken Morneault,
Barry Nagelberg,
Benjamin J. Wilson,
Jacques Rajchgod,
Greg Sidebottom
and
Gery Verwimp
for their valuable comments and suggestions.
.uh "Author's Addresses"
.lp
.TS
expand tab(;);
lr.
Brian Bidulock;Phone: +1-780-490-1141
OpenSS7 Corporation;Email: bidulock@openss7.org
1469 Jeffreys Crescent;URL: http//www.openss7.org/
Edmonton, AB  T6L 6T1;
Canada;
.TE
.bl 3
.lp
This draft expires \*[expiry].
.)b
.#T 2003
